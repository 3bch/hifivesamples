/* Copyright (C) 2012-2013 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 1.1.4 gitCommitId b9ac37dd27c2b253f6bfadb227a650b6ee7792e2 (util,controller,modelWithBinding,view,ui,api.geo,api.sqldb,api.storage) */
(function(b){var L,pa;function e(b,e,n){var q=null,B=qa[b],u=La[b];u&&(q=u(b,B,e,n));!q&&B&&(q=i.u.str.format.apply(null,[B].concat(e)));q&&(q+="(code="+b+")");e=q?Error(q):Error("FwError: code = "+b);b&&(e.code=b);n&&(e.detail=n);throw e;}function da(b,e,n){var q=null,B=qa[b];B&&(e=[B].concat(e),q=i.u.str.format.apply(null,e));return{code:b,message:q,detail:n}}function J(e){return null==e?e:b.isArray(e)?e:[e]}function ga(b){var e=document.createElement("span");e.innerHTML='<a href="'+b+'" />';return e.firstChild.href}
function t(b){return"string"===typeof b}function ja(b){return!t(b)?!1:!!b.match(/^[A-Za-z_\$][\w|\$]*$/)}function ra(e){if("regexp"===b.type(e))return e;var i="",i=-1!==e.indexOf("*")?b.map(e.split("*"),function(b){return b.replace(/\W/g,"\\$&")}).join(".*"):e;return RegExp("^"+i+"$")}var va=void 0;if(window.h5){if(window.h5.env&&"1.1.4"===window.h5.env.version)return;va=window.h5}var i={};window.h5=i;i.coexist=function(){window.h5=va;return i};i.env={version:"1.1.4"};var qa={},La={};L={controllerInternal:null};
pa=void 0;(function(){function j(b){switch(b){case "string":return"s";case "number":return"n";case "boolean":return"b";case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case A:return"u";case "undefElem":return"_";case "objElem":return"@"}}function m(b,e){if(t(b)){var c=b;e&&(c=c.replace(/\\n/g,
"\n").replace(/\\r/g,"\r"));return c=c.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return b instanceof String?new String(m(b.toString())):b}function n(b,e){return"1"===e?b:t(b)?b.replace(/\\\\/g,"\\-").replace(/\\b/g,"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):b instanceof String?new String(n(b.toString())):b}function q(b,e,c){var g=i.async.deferred();
i.ajax({url:b,async:e,cache:c,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=F(arguments);a.push(this.url);g.notifyWith(g,a);g.resolveWith(g,a)}).fail(function(){g.rejectWith(g,F(arguments))});return g.promise()}function B(b){t(b)||e(D,"h5.u.obj.ns()");for(var b=b.split("."),c=b.length,f=0;f<c;f++)ja(b[f])||e(D,"h5.u.obj.ns()");for(var g=window,f=0;f<c;f++){var a=b[f];void 0===g[a]&&(g[a]={});g=g[a]}return g}function u(b,c){var f=B(b),g;for(g in c)c.hasOwnProperty(g)&&
(void 0!==f[g]&&e(C,[b,g]),f[g]=c[g])}function F(b){return Array.prototype.slice.call(b)}var A="undefined",D=11E3,C=11001,f=11004,o=11005,c=11006,s={},v={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&apos;"},M=void 0!==document.createElement("script").onload,K=-1===/\r\n/.toString().indexOf("\r\n");u("h5.u",{loadScript:function(c,f){var j=i.async.deferred,g=J(c);(!g||0===g.length)&&e(11007);for(var a=0,d=g.length;a<d;a++)c=g[a],(!t(c)||!b.trim(c))&&e(11007);null!=f&&!b.isPlainObject(f)&&e(11008,
"h5.u.loadScript()");var l=f&&!1===f.async?!1:!0,O=!!(f&&!0===f.force),a=!!(f&&!0===f.parallel),y=!!(f&&!0===f.atomic),m=!O,o=l?j():null,v=l?function(b){o.reject(da(11010,[b]))}:null,d=l?function(){var b=j();setTimeout(function(){b.resolve([])},0);return b.promise()}:null,n=a?[]:null,B=[],u={};if(l){if(!y&&M){var C=b("head"),D=function(b){var a=j(),p=document.createElement("script");p.onload=function(){p.onload=null;s[b]=b;a.resolve()};p.onerror=function(){p.onerror=null;a.reject(b)};p.type="text/javascript";
p.src=m?b:b+(-1<b.indexOf("?")?"&_":"?_")+ +new Date;C[0].appendChild(p);return a.promise()};if(a)n.push(d()),b.each(g,function(){var b=ga(this);if(!O&&b in s)return!0;n.push(D(b))}),i.async.when(n).then(function(){o.resolve()},v);else{var A=j().resolve().pipe(d);b.each(g,function(){var b=ga(this);A=A.pipe(function(){if(O||!(b in s))return D(b)},v)});A.pipe(function(){o.resolve()},v)}}else if(a){var K=[];n.push(d());K.push(null);b.each(g,function(){var b=ga(this);if(!O&&(b in s||b in u))return!0;
n.push(q(b,l,m));y?u[b]=b:K.push(null)});a=g=null;y?(g=function(){b.each(F(arguments),function(a,d){b.globalEval(d[0])});b.extend(s,u);o.resolve()},a=b.noop):(g=function(){o.resolve()},a=function(){for(var a=F(arguments),d=0;d<K.length;d++)if(a[d]){var p=a[d][3];K[d]!==p&&(b.globalEval(a[d][0]),K.splice(d,1,p))}});i.async.when(n).then(g,v,a)}else A=j().resolve().pipe(d),b.each(g,function(){var a=ga(this);A=A.pipe(function(){var d=j();!O&&(a in s||a in u)?d.resolve():q(a,l,m).then(function(p){y?(B.push(p),
u[a]=a):(b.globalEval(p),s[a]=a);d.resolve()},function(){d.reject(this.url)});return d.promise()},v)}),A.pipe(function(){y&&(b.each(B,function(a,d){b.globalEval(d)}),b.extend(s,u));o.resolve()},v);return o.promise()}b.each(g,function(){var a=ga(this);if(!O&&(a in s||a in u))return!0;q(a,l,m).then(function(d){y?(B.push(d),u[a]=a):(b.globalEval(d),s[a]=a)},function(){e(11010,[a])})});y&&(b.each(B,function(a,d){b.globalEval(d)}),b.extend(s,u))},createInterceptor:function(b,c){return function(e){var g=
{},a=b?b.call(this,e,g):e.proceed();e.result=a;if(!c)return a;if(i.async.isPromise(a)){var d=this;a.always(function(){c.call(d,e,g)});return a}c.call(this,e,g);return a}}});u("h5.u.str",{startsWith:function(b,c){return 0===b.lastIndexOf(c,0)},endsWith:function(b,c){var e=b.length-c.length;return 0<=e&&b.lastIndexOf(c)===e},format:function(b,c){if(null==b)return"";var e=arguments;return b.replace(/\{(\d+)\}/g,function(b,a){var d=e[parseInt(a,10)+1];return typeof d===A?A:d})},escapeHtml:function(c){return"string"!==
b.type(c)?c:c.replace(/[&"'<>]/g,function(b){return v[b]})}});u("h5.u.obj",{expose:u,ns:B,serialize:function(c){function f(b){for(var l=0,c=a.length;l<c;l++)if(b===a[l])return!0;return!1}function q(b){for(var l=0,c=a.length;l<c;l++)b===a[l]&&a.splice(l,1)}function g(d){var l=d,c=b.type(d);"object"===typeof d&&(d instanceof String?c="String":d instanceof Number?c="Number":d instanceof Boolean&&(c="Boolean"));switch(c){case "String":case "string":l=j(c)+m(l);break;case "Boolean":l=l.valueOf();case "boolean":l=
j(c)+(l?1:0);break;case "Number":l=l.valueOf();if(b.isNaN&&b.isNaN(d)||b.isNumeric&&!b.isNumeric(d))l=Infinity===d.valueOf()?j("infinity"):-Infinity===d.valueOf()?j("-infinity"):j("nan");l=j(c)+l;break;case "number":l=b.isNaN&&b.isNaN(d)||b.isNumeric&&!b.isNumeric(d)?Infinity===d?j("infinity"):-Infinity===d?j("-infinity"):j("nan"):j(c)+l;break;case "regexp":l=j(c)+m(l.toString(),K);break;case "date":l=j(c)+ +l;break;case "array":f(d)&&e(ERR_CODE_REFERENCE_CYCLE);a.push(d);for(var y=[],l=j(c)+"[",
c=0,i=d.length;c<i;c++){y[c.toString()]=!0;var s;s=d.hasOwnProperty(c)?"function"===b.type(d[c])?j(A):g(d[c]).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):j("undefElem");l+='"'+s+'"';c!==d.length-1&&(l+=",")}var c="",v;for(v in d)y[v]||"function"!==b.type(d[v])&&(c+='"'+m(v)+'":"'+g(d[v]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');c&&(l+=(d.length?",":"")+'"'+j("objElem")+"{"+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),l=l.replace(/,$/,""),l+='}"');l+="]";q(d);break;case "object":f(d)&&e(o);a.push(d);
l=j(c)+"{";for(v in d)d.hasOwnProperty(v)&&"function"!==b.type(d[v])&&(l+='"'+v+'":"'+g(d[v]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');l=l.replace(/,$/,"");l+="}";q(d);break;case "null":case A:l=j(c)}return l}b.isFunction(c)&&e(11002);var a=[];return"2|"+g(c)},deserialize:function(q){function i(a){function d(b){switch(b){case "s":return"string";case "n":return"number";case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";
case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return A;case "_":return"undefElem";case "@":return"objElem"}}a.match(/^(.)(.*)/);a=RegExp.$1;g=RegExp.$2?RegExp.$2:"";if(void 0!==a&&""!==a)switch(d(a)){case "String":g=new String(n(g,s));break;case "string":break;case "Boolean":"0"===g||"1"===g?g=new Boolean("1"===g):e(c);break;case "boolean":"0"===g||"1"===g?g="1"===g:e(c);break;
case "nan":""!==g&&e(c);g=NaN;break;case "infinity":""!==g&&e(c);g=Infinity;break;case "-infinity":""!==g&&e(c);g=-Infinity;break;case "Number":"infinity"===d(g)?g=new Number(Infinity):"-infinity"===d(g)?g=new Number(-Infinity):"nan"===d(g)?g=new Number(NaN):(g=new Number(g),isNaN(g.valueOf())&&e(c));break;case "number":g=(new Number(g)).valueOf();isNaN(g)&&e(c);break;case "array":var l;try{l=b.parseJSON(g)}catch(q){e(c)}b.isArray(l)||e(c);for(var y=0;y<l.length;y++)switch(d(l[y].substring(0,1))){case "undefElem":delete l[y];
break;case "objElem":for(var m=i(j("object")+l[y].substring(1)),a=[],y=0,v=l.length-1;y<v;y++)a[y]=l[y];l=a;for(var o in m)l[o]=m[o];break;default:l[y]=i(l[y])}g=l;break;case "object":try{l=b.parseJSON(g)}catch(u){e(c)}b.isPlainObject(l)||e(c);for(o in l)l[o]=i(l[o]);g=l;break;case "date":g=new Date(parseInt(g,10));break;case "regexp":try{y=g.match(/^\/(.*)\/(.*)$/),m=n(y[1],s),g=RegExp(m,y[2])}catch(B){e(c)}break;case "null":""!==g&&e(c);g=null;break;case A:""!==g&&e(c);g=void 0;break;default:e(f)}return n(g,
s)}t(q)||e(11009);q.match(/^(.)\|(.*)/);var s=RegExp.$1;"1"!==s&&"2"!==s&&e(11003,[s,"2"]);var g=RegExp.$2;return i(g)},isJQueryObject:function(c){return!c||!c.jquery?!1:c.jquery===b().jquery},argsToArray:F,getByPath:function(b){t(b)||e(D,"h5.u.obj.getByPath()");b=b.split(".");"window"===b[0]&&b.unshift();for(var c=window,f=0,g=b.length;f<g&&!(c=c[b[f]],null==c);f++);return c}})})();(function(){var j,m,n,q,B,u,F;function A(b){return b.match(/^error$/i)?j:b.match(/^warn$/i)?m:b.match(/^info$/i)?n:
b.match(/^debug$/i)?q:b.match(/^trace$/i)?B:b.match(/^all$/i)?u:b.match(/^none$/i)?F:null}function D(a,d){var c={};if(b.isArray(a)){var e=a.slice(0,3).join(" <- ");0<a.slice(3).length&&(e+=" ...");c.recent=e;c.all=d.join("\n")}else c.recent=a,c.all=d;return c}function C(b){var d="";b.name?d=b.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(b.toString()),d=RegExp.$1);return d}function f(a){for(var a=i.u.obj.argsToArray(a),d=[],c=0,e=a.length;c<e;c++)d.push(b.type(a[c]));return d.join(", ")}function o(){}
function c(a){(!t(a)||0===b.trim(a).length)&&e(K);this.category=b.trim(a)}var s=10002,v=10003,M=10004,K=10005,E=10007,Q=10008,H=10010;j=50;m=40;n=30;q=20;B=10;u=0;F=-1;var g=null;o.prototype={init:function(){},log:function(b){window.console&&(t(b.args[0])?this._logMsg(b):this._logObj(b))},_logMsg:function(b){var d=b.args,c=null,c=1===d.length?d[0]:i.u.str.format.apply(i.u.str,d),d=this._getLogPrefix(b)+c;b.logger.enableStackTrace&&(d+="  ["+b.stackTrace.recent+"]");b.logger.enableStackTrace&&console.groupCollapsed?
console.groupCollapsed(d):this._consoleOut(b.level,d);b.logger.enableStackTrace&&this._consoleOut(b.level,b.stackTrace.all);b.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(b,d){var c=!1;b==j&&console.error?(console.error(d),c=!0):b==m&&console.warn?(console.warn(d),c=!0):b==n&&console.info?(console.info(d),c=!0):b==q&&console.debug&&(console.debug(d),c=!0);!c&&console.log&&console.log(d)},_getLogPrefix:function(b){return"["+b.levelString+"]"+b.date.getHours()+
":"+b.date.getMinutes()+":"+b.date.getSeconds()+","+b.date.getMilliseconds()+": "},_logObj:function(b){var d=b.args,c=this._getLogPrefix(b);d.unshift(c);b.level==j&&console.error?this._output(console.error,d):b.level==m&&console.warn?this._output(console.warn,d):b.level==n&&console.info?this._output(console.info,d):b.level==q&&console.debug?this._output(console.debug,d):this._output(console.log,d)},_output:function(b,d){b.apply?b.apply(console,d):b(d)}};c.prototype={enableStackTrace:!1,maxStackSize:10,
error:function(b){this._log(j,arguments,this.error)},warn:function(b){this._log(m,arguments,this.warn)},info:function(b){this._log(n,arguments,this.info)},debug:function(b){this._log(q,arguments,this.debug)},trace:function(b){this._log(B,arguments,this.trace)},_traceFunctionName:function(a){var d=Error(),c=d.stack||d.stacktrace,d=[],e={};if(c)var d=c.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),
g=null,d=b.map(d,function(a){return g=0===a.length?null:""===b.trim(a)?"{anonymous}":b.trim(a)}),e=D(d.slice(3,d.length),d.slice(0,this.maxStackSize));else if(a=a.caller,c=0,a)for(;;){var q=f(a.arguments),i=C(a);i?d.push("{"+i+"}("+q+")"):a.caller?d.push("{anonymous}("+q+")"):d.push("{root}("+q+")");if(!a.caller||c>=this.maxStackSize){e=D(d,d);break}a=a.caller;c++}else D("{unable to trace}","{unable to trace}");return e},_log:function(b,d,c){var d={level:b,args:i.u.obj.argsToArray(d),stackTrace:this.enableStackTrace?
this._traceFunctionName(c):""},e=g.out,f=g.defaultOut,c=null;if(e)for(var e=J(e),q=0,s=e.length;q<s;q++){var m=e[q];if(m.compiledCategory.test(this.category)){c=m;break}}c||(c=f);q=c.compiledLevel;c=c.compiledTargets;if(!(b<q||0>q))if(d.logger=this,d.date=new Date,d.levelString=this._levelToString(b),c&&0!==c.length){q=0;for(s=c.length;q<s;q++)c[q].log(d)}},_levelToString:function(b){if(b===j)return"ERROR";if(b===m)return"WARN";if(b===n)return"INFO";if(b===q)return"DEBUG";if(b===B)return"TRACE"}};
i.u.obj.expose("h5.log",{createLogger:function(b){return new c(b)},configure:function(){function a(a,g,f){var q=null==f;if(!q){var i=g.category;(!t(i)||0===b.trim(i).length)&&e(H);i=b.trim(i);-1!==b.inArray(i,c)&&e(s,g.category);g.compiledCategory=ra(i);c.push(i)}i=null==g.level?A(q?d.level:f.level):t(g.level)?A(b.trim(g.level)):g.level;"number"!==typeof i&&e(v,g.level);g.compiledLevel=i;var i=[],m=g.targets;if(!q||null!=m){var j=[];null==m||b.isArray(m)||t(m)&&b.trim(m).length||e(Q);for(var m=J(m),
y=0,z=m.length;y<z;y++){null==m[y]||t(m[y])&&b.trim(m[y]).length||e(Q);var p=m[y];if(p){-1!==b.inArray(p,j)&&e(E,p);var h=a[p];h||e(M,p);j.push(p);i.push(h.compiledTarget)}}if(!q&&(a=f.targets,null!=a)){a=J(a);y=0;for(z=a.length;y<z;y++)p=a[y],-1===b.inArray(p,j)&&(i.push(f.compiledTargets[y]),j.push(p))}}g.compiledTargets=i}var d={level:"NONE",targets:null},c=[];g=b.extend(!0,{},i.settings.log?i.settings.log:{defaultOut:d});var f=g.target;f||(f={},g.target=f);(function(a){b.isPlainObject(a)||e(10009);
for(var d in a){var c=a[d];b.type(c.type)!=="object"&&c.type!=="console"&&e(1E4);var g=null,g=c.type==="console"?new o:b.extend(true,{},c.type);g.init&&g.init(c);c.compiledTarget=g}a.console={type:"console",compiledTarget:new o}})(f);var q=g.defaultOut;q||(q=d,g.defaultOut=q);a(f,q);var m=g.out;if(m)for(var m=J(m),j=0,n=m.length;j<n;j++)a(f,m[j],q)}})})();(function(){function e(q){i.settings.aspects=b.map(J(q),function(b){b.target&&(b.compiledTarget=ra(b.target));b.pointCut&&(b.compiledPointCut=ra(b.pointCut));
return b})}i.u.obj.ns("h5.settings");i.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:5E3}};var m=i.u.createInterceptor(function(b,e){e.start=new Date;return b.proceed()},function(b,e){this.log.info('{0} "{1}": {2}ms',this.__name,b.funcName,new Date-e.start)}),n=i.u.createInterceptor(function(b){this.log.info('{0} "{1}"が開始されました。',this.__name,b.funcName);this.log.info(b.args);return b.proceed()},function(b){this.log.info('{0} "{1}"が終了しました。',
this.__name,b.funcName)});i.u.obj.expose("h5.core.interceptor",{lapInterceptor:m,logInterceptor:n,errorInterceptor:function(e){var m=null;try{m=e.proceed()}catch(j){i.settings.commonFailHandler&&b.isFunction(i.settings.commonFailHandler)&&i.settings.commonFailHandler.call(null,j)}return m}});b(window.document).trigger("h5preinit");i.settings.aspects&&e(i.settings.aspects);i.log.configure()})();(function(){i.u.obj.expose("h5.env",{ua:function(e){var i=!!e.match(/iPhone/i),n=!!e.match(/iPad/i),q=i||
n,B=!!e.match(/android/i),u=!!e.match(/Windows Phone/i),F=!!e.match(/MSIE/),A=!!e.match(/Firefox/i),D=!!e.match(/Chrome/i)||!!e.match(/CrMo/)||!!e.match(/CriOS/),C=!B&&!!e.match(/Safari/i)&&!D,f=!!e.match(/Webkit/i),o=!!e.match(/Opera/i),c=B&&!!e.match(/Safari/i)&&!D,s=!(!i&&!u&&!(c&&e.match(/Mobile/)&&!e.match(/SC-01C/)||B&&D&&e.match(/Mobile/)||e.match(/Fennec/i)||e.match(/Opera Mobi/i))),v=!(!n&&!(c&&!e.match(/Mobile/)||B&&D&&!e.match(/Mobile/)||e.match(/SC-01C/)||e.match(/Fennec/i)||e.match(/Opera Tablet/i))),
M=!s&&!v,K=null,E=null,t=function(a,d){return b.trim(e.substring(e.indexOf(a)+a.length,e.indexOf(d))).split("_")},H=function(a,d){var c=b.trim(e.match(!1===d?RegExp(a+"[^;)]*"):RegExp(a+"[^;)]*","i"))).split(" ");return 1===c.length?"":c[c.length-1]},g=function(a,d){var c=b.trim(e.match(!1===d?RegExp(a+"[^;) ]*"):RegExp(a+"[^;) ]*","i"))).split("/");return 1===c.length?"":c[c.length-1]};if(i)E=t("iPhone OS","like"),K=parseInt(E[0]),E=E.join(".");else if(n)E=t("CPU OS","like"),K=parseInt(E[0]),E=E.join(".");
else if(!B||!A)B?(E=H("Android"),K=parseInt(E.split(".")[0])):u&&((E=H("Windows Phone OS"))||(E=H("Windows Phone")),K=parseInt(E.split(".")[0]));F&&o&&(F=!1);var a=t=null;if(q||B&&c)t=K,a=E;else{var d=null;F?d=H("MSIE",!1):D?(d=g("Chrome",!1))||(d=g("CrMo",!1)):C?d=g("Version"):A?d=g("Firefox"):o&&((d=g("Version"))||(d=g("Opera")),d||(d=H("Opera")));d&&(t=parseInt(d.split(".")[0]),a=d)}return{osVersion:K,osVersionFull:E,browserVersion:t,browserVersionFull:a,isiPhone:i,isiPad:n,isiOS:q,isAndroid:B,
isWindowsPhone:u,isIE:F,isFirefox:A,isChrome:D,isSafari:C,isOpera:o,isAndroidDefaultBrowser:c,isSmartPhone:s,isTablet:v,isDesktop:M,isWebkit:f}}(navigator.userAgent)})})();(function(){var j=b.Deferred,m=function(){var b=j();if(!b.notify&&!b.notifyWith&&!b.progress){var e=!1,m=null,n=null;b.__h5__progressCallbacks=[];b.__h5__progressFilters=[];var A=function(c){var a=this.__h5__progressPipeFilters;if(e){var d=n;if(a&&0<a.length)for(var l=0,f=a.length;l<f;l++)d=a[l].apply(this,J(d));d!==n&&(d=J(d));
c.apply(m,d)}b.__h5__progressCallbacks.push(c);b.__h5__progressFilters.push(a);return this};b.progress=A;var D=b.promise;b.promise=function(b){b=D.call(this,b);b.progress=A;return b};b.notify=function(){e=!0;-1!==arguments.length&&(m=this,n=i.u.obj.argsToArray(arguments));var c=b.__h5__progressCallbacks,a=b.__h5__progressFilters,d=i.u.obj.argsToArray(arguments);if(0<c.length)for(var f=0,s=c.length;f<s;f++){var y=d;if(a[f]&&0<a[f].length)for(var o=0,v=a[f].length;o<v;o++)y=a[f][o].apply(this,J(y));
y!==arguments&&(y=J(y));c[f].apply(this,y)}return this};b.notifyWith=function(b,a){e=!0;m=b;n=a;var c=this.__h5__progressCallbacks,f=this.__h5__progressFilters;if(0<c.length)for(var i=0,s=c.length;i<s;i++){var o=a;if(f[i]&&0<f[i].length)for(var q=0,v=f[i].length;q<v;q++)o=f[i][q].apply(this,J(o));o!==a&&(o=J(o));c[i].apply(b,o)}return this};var C=b.pipe;b.pipe=function(c,a,d){c=C.call(this,c,a);d&&(c.__h5__progressPipeFilters=this.__h5__progressPipeFilters?this.__h5__progressPipeFilters.concat([d]):
[d]);C=c.pipe;c.pipe=b.pipe;c.progress=b.progress;return c}}var f=!1,o=!1,c=b.fail,s=function(){0<arguments.length&&(f=!0);return c.apply(this,arguments)};b.fail=s;var v=b.always,M=function(){0<arguments.length&&(f=!0);return v.apply(this,arguments)};b.always=M;var t=function(b,a,c){b&&this.done.apply(this,J(b));a&&this.fail.apply(this,J(a));c&&this.progress.apply(this,J(c));return this};b.then=t;var E=b.reject;b.reject=function(){var b=i.settings.commonFailHandler;!f&&b&&!o&&(c.call(this,b),o=!0);
return E.apply(this,arguments)};var Q=b.rejectWith;b.rejectWith=function(){var b=i.settings.commonFailHandler;!f&&b&&!o&&(c.call(this,b),o=!0);return Q.apply(this,arguments)};var H=b.promise;b.promise=function(b){b=H.call(this,b);b.always=M;b.then=t;b.fail=s;return b};return b},n=function(b){return!!b&&b.done&&b.fail&&!b.resolve&&!b.reject};i.u.obj.expose("h5.async",{deferred:m,when:function(){var e=i.u.obj.argsToArray,m=i.async.deferred,n=e(arguments);1===n.length&&b.isArray(n[0])&&(n=n[0]);var j=
b.Deferred();if(!j.notify&&!j.notifyWith&&!j.progress){var A=n.length,D=A,C=Array(A),f=n[0],j=1>=A&&f&&b.isFunction(f.promise)?f:m();if(1<A){for(var m=function(b){return function(f){n[b]=1<arguments.length?e(arguments):f;--D||j.resolveWith(j,n)}},f=function(b){return function(f){C[b]=1<arguments.length?e(arguments):f;j.notifyWith(j.promise(),C)}},o=0;o<A;o++)n[o]&&b.isFunction(n[o].promise)?n[o].promise().then(m(o),j.reject,f(o)):--D;D||j.resolveWith(j,n)}else j!==f&&j.resolveWith(j,A?[f]:[])}else j=
m(),b.when.apply(b,n).done(function(){j.resolveWith(j,e(arguments))}).fail(function(){j.rejectWith(j,e(arguments))}).progress(function(){j.notifyWith(j,e(arguments))});return j.promise()},isPromise:n,loop:function(i,j,u){b.isArray(i)||e(5E3);var t=m(),A="number"===b.type(u)?u:20,D=!1,C=0,f=i.length,o,c=null,s=function(){if(C===f)t.resolve(i);else if(D)t.reject(i);else{var b=j.call(i,C,i[C],c);C++;n(b)?b.done(function(){o()}).fail(function(){D=!0;o()}):o()}},v=function(){setTimeout(function(){var b=
C-1;0<C&&t.notify({data:i,index:b,value:i[b]});s()},0)},M=!1;o=function(){M||(0===C%A?v():s())};var K=!1,c={resume:function(){!K&&M&&(M=!1,o())},pause:function(){M=!0},stop:function(){K=!0;t.resolve(i)}};v();return t.promise()}})})();(function(){i.u.obj.expose("h5",{ajax:function(e){var m=t(arguments[0])?arguments[1]:arguments[0],m=m&&(m.error||m.fail||m.complete||m.always),n=b.ajax.apply(b,arguments);n.progress||(n.progress=function(){});var q=!1,B=i.settings.commonFailHandler;if(!m&&B){n.fail(function(){q||
B.apply(null,arguments)});var u=n.fail;n.fail=function(){q=true;return u.apply(n,arguments)};n.error=n.fail;var F=n.always;n.always=function(){q=true;return F.apply(n,arguments)};n.complete=n.always;n.then=function(b,e,i){b&&n.done.apply(n,J(b));e&&n.fail.apply(n,J(e));i&&n.progress.apply(n,J(i));return n}}return n}})})();(function(){function j(b,a,h,c,d){this.controller=b;this.event=a;this.evArg=h;this.selector=c;this.selectorType=d}function m(b){if(this.__controllerContext.executeListeners)return b.proceed()}
function n(b,a,h){var c=q(b.__name,a);h&&c.push(m);return B(b[a],a,c)}function q(a,h){var c=[],d=i.settings.aspects;if(!d||0===d.length)return c;for(var d=J(d),k=d.length-1;-1<k;k--){var p=d[k];if(!p.target||p.compiledTarget.test(a)){var e=p.interceptors;if(!p.pointCut||p.compiledPointCut.test(h))if(b.isArray(e))for(p=e.length-1;-1<p;p--)c=c.concat(e[p]);else c.push(e)}}return c}function B(b,a,h){for(var c=function(b,a,h){return function(){var c=this;return h.call(c,{target:c,func:b,funcName:a,args:arguments,
proceed:function(){return b.apply(c,this.args)}})}},d=0,k=h.length;d<k;d++)b=c(b,a,h[d]);return b}function u(b){return!!b.match(/^\{.*\}$/)}function F(b){return!!b.match(/^\[.*\]$/)}function A(a){return b.trim(a.substring(1,a.length-1))}function D(a){return b.trim(a.substring(1,a.length-1))}function C(b){for(var a=["window","document","navigator"],h=0,c=a.length;h<c;h++){var d=a[h];if(b===d||Ca(b,d+"."))return Da(b)}return b}function f(a){var h=function(a,c){for(var d in a)if(0<=b.inArray(a,c)||oa(d,
sa)&&h(a[d],c.concat([a])))return!0;return!1};return h(a,[])}function o(a){var h=function(a,c){for(var d in a)if(0<=b.inArray(a,c)||oa(d,ta)&&h(a[d],c.concat([a])))return!0;return!1};return h(a,[])}function c(a,h){var c=a[h];return oa(h,sa)&&"rootController"!==h&&"parentController"!==h&&!b.isFunction(c)&&c&&!c.__controllerContext.isRoot}function s(a,h,d){var k=[],p=[],e=function(a){p.push(a);for(var Ga in a)if(c(a,Ga)){var r=a[Ga],x=d?r.__controllerContext[h]:r[h];x&&k.push(x);-1===b.inArray(r,p)&&
e(r)}};e(a);return k}function v(b){var a=function(b){var h=b.__meta,d={};if(h)for(var k in h)!1===h[k].useHandlers&&(d[k]=1);for(k in b)h=b[k],c(b,k)&&(a(h),d[k]||M(h))};a(b)}function M(a){var h=a.__controllerContext.bindMap,c;for(c in h)for(var d in h[c]){var k=a,p=c,e=d,r=k.__controllerContext.bindMap[p][e],x=e,N=F(e);N&&(x=D(e));var f=null;switch(x){case "mousewheel":f=W(k,p,x,r);break;case ka:case I:case wa:f=$(k,p,e,r);break;default:f=U(k,p,x,r)}if(b.isArray(f)){k=0;for(p=f.length;k<p;k++)E(f[k],
N)}else E(f,N)}}function K(a){var h=a.controller.rootElement,c=a.selector,d=a.eventName,k=a.handler,p=F(d),d=p?D(d):d;if(u(c)){var e=A(c),c=!1;e===xa?c=!0:h=C(e);c||p||!t(h)?(a.evSelectorType=ya.SELECTOR_TYPE_OBJECT,b(h).bind(d,k)):(a.evSelectorType=ya.SELECTOR_TYPE_GLOBAL,b(document).delegate(h,d,k));a.evSelector=h}else a.evSelectorType=ya.SELECTOR_TYPE_LOCAL,a.evSelector=c,p?b(c,h).bind(d,k):b(h).delegate(c,d,k)}function E(a,h){h&&(a.eventName="["+a.eventName+"]");var c=a.handler;a.handler=function(){var h=
i.settings.listenerElementType===1?b(arguments[0].currentTarget):arguments[0].currentTarget;c.call(a.controller,X(a,arguments),h)};T(a.controller,a.selector,a.eventName,a.handler);K(a)}function Q(b){var a=function(b){var h=b.__meta,d={};if(h)for(var k in h)!1===h[k].useHandlers&&(d[k]=1);for(k in b)h=b[k],c(b,k)&&(a(h),d[k]||H(h))};a(b)}function H(a){var h=a.rootElement,a=a.__controllerContext.unbindMap,c;for(c in a)for(var d in a[c]){var k=a[c][d],p=F(d),e=p?D(d):d;if(u(c)){var r=A(c),x=!1;r===xa?
(r=h,x=!0):r=C(r);x||p||!t(r)?b(r).unbind(e,k):b(document).undelegate(r,e,k)}else p?b(c,h).unbind(e,k):b(h).undelegate(c,e,k)}}function g(a,h){a.__controllerContext.executeListeners=h;var d=[],k=function(a){d.push(a);for(var p in a)if(c(a,p)){var e=a[p];e.__controllerContext.executeListeners=h;-1===b.inArray(e,d)&&k(e)}};k(a)}function a(a){var h=[],d=function(a,k,p){a.rootController=k;a.parentController=p;h.push(a);for(var e in a)c(a,e)&&(p=a[e],-1===b.inArray(p,h)&&d(p,k,a))};d(a,a,null)}function d(b,
a){var h=a?"__init":"__ready",d=aa();setTimeout(function(){d.resolve()},0);var k=d.promise(),p=function(d){var e=!0,r;for(r in d)c(d,r)&&(e=!1,p(d[r]));var x=function(){var c=null;if(d[h])try{c=d[h]({args:d.__controllerContext.args})}catch(k){throw b.rootController&&b.rootController.dispose(arguments),k;}var p=a?O(d):y(d);i.async.isPromise(c)?c.done(function(){p()}).fail(function(){b.rootController&&b.rootController.dispose(arguments)}):p()};r=a?l(d):s(d,"readyPromise");a&&e&&r.push(k);i.async.when(r).done(function(){x()}).fail(za)};
p(b)}function l(b){var a=s(b,"initPromise");a.push(b.preinitPromise);return a}function O(b){return function(){if(!G(b)){b.isInit=!0;var a=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;delete b.__controllerContext.preinitDfd;delete b.__controllerContext.initDfd;a.resolve();b.__controllerContext&&b.__controllerContext.isRoot&&z(b)}}}function y(a){return function(){if(!G(a)){a.isReady=!0;var h=a.__controllerContext.readyDfd;delete a.__controllerContext.readyDfd;h.resolve();
a.__controllerContext&&a.__controllerContext.isRoot&&a.rootElement&&a.isInit&&a.isReady&&b(a.rootElement).trigger("h5controllerready",a)}}}function R(a,h,c){if(!t(a))return b(a);var d=b.trim(a);u(d)?(a=A(d),c&&(c=Ca(a,"window")?!1:Ca(a,"navigator")?!1:!0,c=!c),c&&e(Ma),c=b(C(a))):c=b(h).find(a);return c}function T(b,a,h,c){b.__controllerContext.unbindMap[a]||(b.__controllerContext.unbindMap[a]={});b.__controllerContext.unbindMap[a][h]=c}function U(b,a,h,c){return{controller:b,selector:a,eventName:h,
handler:c}}function W(b,a,h,c){return{controller:b,selector:a,eventName:typeof document.onmousewheel===Aa?"DOMMouseScroll":h,handler:function(a){var h=a.event;h.originalEvent&&h.originalEvent.detail&&(h.wheelDelta=40*-h.detail);c.call(b,a)}}}function $(a,h,c,d){var k=typeof document.ontouchstart!==Aa;if(c!==ka)return k?U(a,h,c,d):U(a,h,c,function(a){var h=a.event,c=b(h.currentTarget).offset()||{left:0,top:0};h.offsetX=h.pageX-c.left;h.offsetY=h.pageY-c.top;d.apply(this,arguments)});var p=function(b,
a){for(var h in b)b.hasOwnProperty(h)&&!a[h]&&"target"!==h&&"currentTarget"!==h&&"originalEvent"!==h&&"liveFired"!==h&&(a[h]=b[h]);a.h5DelegatingEvent=b},e=k?"touchstart":"mousedown",r=k?"touchmove":"mousemove",x=k?"touchend":"mouseup",N=b(document);return function(){var f=null,G=!1,i=function(h,c,d){return function(e){var l;a:{switch(h){case "touchstart":case "mousedown":l=ka;break a;case "touchmove":case "mousemove":l=I;break a;case "touchend":case "mouseup":l=wa;break a}l=void 0}var z=l===ka;if(!z||
!G){k&&ha(e.event,h);var g=new b.Event(l);p(e.event,g);var m=e.event.target;c&&(m=c);d&&d(g);var w=e.event.originalEvent||e.event;z&&-1===b.inArray(w,ia)&&(ia=[],la=[]);var s=b.inArray(w,ia);-1===s&&(s=ia.push(w)-1,la[s]=!1);if(!la[s]&&(!k||G||z))la[s]=!0,b(m).trigger(g,e.evArg),G=!0;if(e.event.currentTarget===document&&(l===wa&&(ia=[],la=[]),-1!==b.inArray(w,ia)))ia.splice(s,1),la.splice(s,1);if(z&&G){g.h5DelegatingEvent.preventDefault();l=g.target;var o=g.clientX,Ha=g.clientY,xa=i(r,l,function(b){var a=
b.clientX,h=b.clientY;b.dx=a-o;b.dy=h-Ha;o=a;Ha=h}),j=i(x,l),ea=function(b){e.event=b;e.evArg=V(arguments);xa(e)},y=function(b){e.event=b;e.evArg=V(arguments);j(e)},ca=k?b(l):N;f=function(){ia=[];la=[];ca.unbind(r,ea);ca.unbind(x,y);if(!k&&a.rootElement!==document){b(a.rootElement).unbind(r,ea);b(a.rootElement).unbind(x,y)}};ca.bind(r,ea);ca.bind(x,y);!k&&a.rootElement!==document&&(b(a.rootElement).bind(r,ea),b(a.rootElement).bind(x,y))}else l===wa&&(f(),G=!1)}}},l=[U(a,h,c,d)];l.push({controller:a,
selector:h,eventName:e,handler:i(e)});return l}()}function ha(a,h){var c=a.originalEvent;if(c){var d="touchend"===h||"touchcancel"===h?c.changedTouches[0]:c.touches[0],k=d.pageX,p=d.pageY;a.pageX=c.pageX=k;a.pageY=c.pageY=p;a.screenX=c.screenX=d.screenX;a.screenY=c.screenY=d.screenY;a.clientX=c.clientX=d.clientX;a.clientY=c.clientY=d.clientY;d=a.target;if(d.ownerSVGElement)d=d.farthestViewportElement;else if(d===window||d===document)d=document.body;if(d=b(d).offset())p-=d.top,a.offsetX=c.offsetX=
k-d.left,a.offsetY=c.offsetY=p}}function V(b){return 3>b.length?b[1]:Ea(b).slice(1)}function X(a,h){var c=null,d=null;h&&(c=h[0],d=V(h));var k=c;if(k&&null==k.offsetX&&null==k.offsetY&&k.pageX&&k.pageY){var p=k.target;if(p.ownerSVGElement)p=p.farthestViewportElement;else if(p===window||p===document)p=document.body;if(p=b(p).offset())k.offsetX=k.pageX-p.left,k.offsetY=k.pageY-p.top}return new j(a.controller,c,d,a.evSelector,a.evSelectorType)}function S(b){for(var a in b){var h=b[a];c(b,a)&&(h.rootElement=
null,h.view.__controller=null,S(h))}}function ba(b){var a=b.rootElement,h=b.__meta,d;for(d in b){var k=b[d];c(b,d)&&(k.rootElement=h&&h[d]&&h[d].rootElement?P(h[d].rootElement,a,k):a,k.view.__controller=k,ba(k))}}function P(a,h,c){null==a&&e(Ia,[c.__name]);!t(a)&&"object"!==typeof a&&e(qa,[c.__name]);a=h?R(a,h):b(a);0===a.length&&e(Ja,[c.__name]);1<a.length&&e(Ka,[c.__name]);return a.get(0)}function z(a){M(a);v(a);var h=a.__controllerContext.managed,c=i.core.controllerManager.controllers;-1===b.inArray(a,
c)&&!1!==h&&c.push(a);!1!==h&&b(a.rootElement).trigger("h5controllerbound",a);h=s(a,"initPromise");h.push(a.initPromise);i.async.when(h).done(function(){d(a,!1)}).fail(za)}function p(b){null===b.rootController&&a(b);ba(b);d(b,!0)}function h(b,a){var d=aa();d.resolve();b.__controllerContext.templatePromise=d.promise();b.__controllerContext.initDfd=aa();b.initPromise=b.__controllerContext.initDfd.promise();b.__controllerContext.readyDfd=aa();b.readyPromise=b.__controllerContext.readyDfd.promise();b.isInit=
!1;b.isReady=!1;b.__controllerContext.args=a;for(var k in b)c(b,k)&&h(b[k])}function k(a,h){var c=null,d=h;b.isPlainObject(d)?c=d.target:d={};c=c?R(c,a.rootElement,!0):a.rootElement;return i.ui.indicator.call(a,c,d)}function r(a,h){var d=[],k=[],p=function(a){var e=aa();k.push(a);for(var r in a)if(c(a,r)){var x=a[r];-1===b.inArray(x,k)&&p(x)}a[h]&&b.isFunction(a[h])&&(a=a[h](),i.async.isPromise(a)&&(a.always(function(){e.resolve()}),d.push(e.promise())))};p(a);return d}function N(a){var h=[],d=function(a){h.push(a);
a.view.__view&&a.view.clear();for(var k in a)if(a.hasOwnProperty(k)){if(c(a,k)){var p=a[k];-1===b.inArray(p,h)&&d(p)}a[k]=null}};d(a)}function x(b,a){return a.view.__view.isAvailable(b)?a.view.__view:a.parentController?x(b,a.parentController):i.core.view}function G(b){return!b.__controllerContext||b.__controllerContext.isDisposing}function ca(b,a){function h(b,c){var k=b.__controllerContext[p[c]];k&&!(k.isRejected?k.isRejected():"rejected"===k.state())&&!(k.isResolved?k.isResolved():"resolved"===
k.state())&&k.reject(a);if(b.parentController)h(b.parentController,c);else if(c<p.length-1)for(var k=0,e=d.length;k<e;k++)h(d[k],c+1)}var d=[],k=function(b){var a=!1,h;for(h in b)c(b,h)&&(a=!0,k(b[h]));a||d.push(b)};k(b);for(var p=["initDfd","readyDfd"],e=0,r=d.length;e<r;e++)h(d[e],0)}function w(b,a){for(var h=b.childNodes,c=0,d=h.length;c<d;c++){var k=h[c];if(1===k.nodeType){if(k=w(k,a))return k}else if(8===k.nodeType){var p=k.nodeValue;if(0===p.indexOf(Na)){var e=p.indexOf("}");if(-1!==e&&(p=p.slice(0,
e).match(/id="([A-Za-z][\w-:\.]*)"/))&&p[1]===a)return k}}}return null}function ea(b){this.__controller=b;Da("h5.core.view")&&(this.__view=i.core.view.createView())}function Y(b,a,h,c){this.__name=a;this.__templates=null;this.rootElement=b;this.__controllerContext={executeListeners:!0,isRoot:c,bindMap:{},unbindMap:{}};this.__controllerContext.args=h?h:null;this.isReady=this.isInit=!1;this.readyPromise=this.initPromise=this.preinitPromise=this.parentController=this.rootController=null;this.log=i.log.createLogger(a);
this.view=new ea(this)}function ma(){this.rootElement=document;this.controllers=[];b(document).bind(Ba,function(b,a){null==a.target&&(a.target=document);a.indicator=k(this,a);b.stopPropagation()})}function Z(a,h,c,d){var k=!d||!d.isInternal,r=h.__name;(!t(r)||0===b.trim(r).length)&&e(Oa,null,{controllerDefObj:h});c&&!b.isPlainObject(c)&&e(Pa,[r],{controllerDefObj:h});h.__controllerContext&&e(Qa,null,{controllerDefObj:h});if(k||a)if(null==a)e(Ia,[r],{controllerDefObj:h});else if(t(a)||"object"===typeof a){var x=
b(a);0===x.length&&e(Ja,[r],{controllerDefObj:h});1<x.length&&e(Ka,[r],{controllerDefObj:h})}else e(qa,[r],{controllerDefObj:h});f(h)&&e(Ra,[r],{controllerDefObj:h});o(h)&&e(Sa,[r],{controllerDefObj:h});var x=b.extend(!0,{},h),I=new Y(a?b(a).get(0):null,r,c,k),N=h.__templates,l=aa(),a=l.promise(),z=aa(),g=z.promise();I.__controllerContext.preinitDfd=z;I.preinitPromise=g;I.__controllerContext.initDfd=aa();I.initPromise=I.__controllerContext.initDfd.promise().fail(za);I.__controllerContext.readyDfd=
aa();I.readyPromise=I.__controllerContext.readyDfd.promise();k||I.readyPromise.fail(za);if(N&&0<N.length){var m=function(b){Da("h5.core.view")||e(ra);I.view.load(N).then(function(){l.resolve()},function(a){var c=a.detail.error,c=c?c.status:null;b===i.settings.dynamicLoading.retryCount||0!==c&&12029!==c?(a.controllerDefObject=h,setTimeout(function(){l.reject(a)},0)):setTimeout(function(){m(++b)},i.settings.dynamicLoading.retryInterval)})};m(0)}else l.resolve();a.done(function(){G(I)||z.resolve()}).fail(function(b){z.reject(b);
I.rootController&&G(I.rootController);I.rootController&&I.rootController.dispose(b)});for(var w in x)if(Fa[w])e(Ta,[r,w],{controllerDefObj:h});else if(("__ready"===w||"__construct"===w||"__init"===w)&&b.isFunction(x[w]))I[w]=n(x,w);else if(-1!==w.indexOf(" ")&&b.isFunction(x[w])){a=b.trim(w);g=a.lastIndexOf(" ");k=b.trim(a.substring(0,g));a=b.trim(a.substring(g+1,a.length));F(a)&&(a="["+b.trim(D(a))+"]");u(k)&&"this"===A(k)&&e(Ua,[r],{controllerDefObj:h});g=I.__controllerContext.bindMap;g[k]||(g[k]=
{});g[k][a]&&e(Va,[r,k,a],{controllerDefObj:h});var s=n(x,w,!0);g[k][a]=s;I[w]=s}else oa(w,sa)&&x[w]&&!b.isFunction(x[w])?(k=Z(null,b.extend(!0,{},x[w]),c,b.extend({isInternal:!0},d)),I[w]=k):oa(w,ta)&&x[w]&&!b.isFunction(x[w])?(k=ua(x[w]),I[w]=k):I[w]=b.isFunction(x[w])?n(x,w):x[w];if(c=I.__meta)for(w in c)k=I[w],void 0===k&&e(da,[r,w],{controllerDefObj:h}),null===k&&e(ga,[r,w],{controllerDefObj:h}),Y.prototype.constructor!==k.constructor&&e(ja,[r,w],{controllerDefObj:h});I.__construct&&I.__construct({args:I.__controllerContext.args});
if(G(I))return null;d&&"managed"in d&&(I.__controllerContext.managed=d.managed);I.__controllerContext.isRoot&&p(I);return I}function ua(a){var h=a.__name;(!t(h)||0===b.trim(h).length)&&e(pa,null,{logicDefObj:a});a.__logicContext&&e(Wa,null,{logicDefObj:a});var a=b.extend(!0,{},a),c;for(c in a)a[c]=b.isFunction(a[c])?B(a[c],c,q(a.__name,c)):a[c];a.deferred=aa;a.log=i.log.createLogger(h);a.__logicContext={};for(var k in a)a.hasOwnProperty(k)&&oa(k,ta)&&(a[k]=ua(a[k]));return a}var Aa="undefined",sa=
"Controller",ta="Logic",ka="h5trackstart",I="h5trackmove",wa="h5trackend",xa="rootElement",Ba="triggerIndicator",Na="{h5view ",Ma=6E3,Ia=6001,Ja=6003,Ka=6004,Oa=6006,Pa=6007,Qa=6008,Ra=6009,Sa=6010,Ta=6011,Ua=6012,Va=6013,da=6014,ga=6015,ja=6016,pa=6017,Wa=6018,ra=6029,qa=6030,za=function(){},aa=i.async.deferred,Ca=i.u.str.startsWith,oa=i.u.str.endsWith,va=i.u.str.format,Ea=i.u.obj.argsToArray,Da=i.u.obj.getByPath,ya={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},ia=[],la=[];
b.extend(j.prototype,ya);b.extend(ea.prototype,{get:function(b,a){return x(b,this.__controller).get(b,a)},update:function(b,a,h){b=R(b,this.__controller.rootElement,!0);x(a,this.__controller).update(b,a,h)},append:function(b,a,h){b=R(b,this.__controller.rootElement,!0);x(a,this.__controller).append(b,a,h)},prepend:function(b,a,h){b=R(b,this.__controller.rootElement,!0);x(a,this.__controller).prepend(b,a,h)},load:function(b){return this.__view.load(b)},register:function(b,a){this.__view.register(b,
a)},isValid:function(b){return this.__view.isValid(b)},isAvailable:function(b){return x(b,this.__controller).isAvailable(b)},clear:function(b){this.__view.clear(b)},bind:function(a,h){var c=a;if(t(a)&&0===a.indexOf("h5view#")){for(var k=w(this.__controller.rootElement,a.slice(7)),c=k.nodeValue,c=c.slice(c.indexOf("}")+1),d=b("<div>").append(c),c=[],p=d[0].childNodes,e=0,r=p.length;e<r;e++)c.push(p[e]);d.empty();d=document.createDocumentFragment();e=0;for(r=c.length;e<r;e++)d.appendChild(c[e]);k.parentNode.insertBefore(d,
k.nextSibling)}return this.__view.bind(c,h)}});b.extend(Y.prototype,{$find:function(a){return b(this.rootElement).find(a)},deferred:function(){return aa()},trigger:function(a,h){b(this.rootElement).trigger(a,h)},own:function(b){var a=this;return function(){b.apply(a,arguments)}},ownWithOrg:function(b){var a=this;return function(){var h=i.u.obj.argsToArray(arguments);h.unshift(this);b.apply(a,h)}},bind:function(b,a){this.__controllerContext.isRoot||e(6031);this.rootElement=P(b,null,this);this.view.__controller=
this;h(this,a?a:null);p(this);return this},unbind:function(){this.__controllerContext.isRoot||e(6031);r(this,"__unbind");H(this);Q(this);this.__controllerContext.unbindMap={};var a=this;i.core.controllerManager.controllers=b.grep(i.core.controllerManager.controllers,function(b){return b!==a});b(this.rootElement).trigger("h5controllerunbound",this);this.rootElement=null;this.view.__controller=null;S(this)},dispose:function(b){if(!G(this)){ca(this,b);this.__controllerContext.isDisposing=1;var a=this.deferred();
this.unbind();var h=this,b=r(this,"__dispose");i.async.when(b).done(function(){N(h);a.resolve()});return a.promise()}},triggerIndicator:function(a){var h={indicator:null};a&&b.extend(h,a);b(this.rootElement).trigger(Ba,[h]);return h.indicator},indicator:function(b){return k(this,b)},enableListeners:function(){g(this,!0)},disableListeners:function(){g(this,!1)},throwError:function(b,a){var h=Ea(arguments);h.unshift(null);this.throwCustomError.apply(null,h)},throwCustomError:function(b,a,h){2>arguments.length&&
e(6005);var c=null;a&&t(a)?c=Error(va.apply(null,Ea(arguments).slice(1))):(c=Error(),c.detail=a);c.customType=b;throw c;}});b.extend(ma.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(a,h){for(var c=h&&h.deep,k=h&&h.name?J(h.name):null,d=b(a)[0],p=this.controllers,e=[],r=0,x=p.length;r<x;r++){var I=p[r];k&&-1===b.inArray(I.__name,k)||(d===I.rootElement?e.push(I):c&&b.contains(d,I.rootElement)&&e.push(I))}return e}});i.u.obj.expose("h5.core",{controllerManager:new ma});
var Fa={},na=new Y(null,"a"),fa;for(fa in na)na.hasOwnProperty(fa)&&"__name"!==fa&&"__templates"!==fa&&"__meta"!==fa&&(Fa[fa]=1);na=null;na=Y.prototype;for(fa in na)na.hasOwnProperty(fa)&&(Fa[fa]=1);na=null;L.controllerInternal=Z;i.u.obj.expose("h5.core",{controller:function(b,a,h){2>arguments.length&&e(6032);return Z(b,a,h)},logic:ua,expose:function(b){var a=b.__name;a||e(6019,null,{target:b});var h=a.lastIndexOf(".");if(-1===h)window[a]=b;else{var c=a.substr(0,h),a=a.substr(h+1,a.length),h={};h[a]=
b;i.u.obj.expose(c,h)}}})})();(function(){function j(b){return!b?!1:-1!==b.indexOf("[]")}function m(){var b=arguments[0];if(!L.data.DESCRIPTOR_VALIDATION_ERROR_MSGS)return{code:b}}function n(a,h,c,k,d){function p(h){for(var h=J(a.schema[h].depend.on),c=0,k=h.length;c<k;c++)if(-1===b.inArray(h[c],a._realProperty)&&-1!==b.inArray(h[c],x))return!1;return!0}function r(a,h){for(var c=0,k=h.length;c<k;c++){var d=N[h[c]];if(d)for(var p=0,e=d.length;p<e;p++){var x=d[p];-1===b.inArray(x,a)&&a.push(x)}}}var x=
[],N=a._dependencyMap,f={};for(d?x=a._dependProps.slice():r(x,J(k));0!==x.length;){for(var k=[],d=0,G=x.length;d<G;d++){var w=x[d];if(p(w)){var z=a.schema[w].depend.calc.call(h,c);0!==a._itemValueCheckFuncs[w](z,!0).length&&e(l,[w,z]);f[w]={oldValue:h._values[w],newValue:z};if(a.schema[w]&&j(a.schema[w].type)){var g=h._internal||h;z?(h._values[w].copyFrom(z),g._nullProps[w]=!1):(h._values[w].copyFrom([]),g._nullProps[w]=!0)}else h._values[w]=z}else k.push(w)}r(k,x);x=k}return f}function q(b){return(b=
b.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/))?{elmType:b[1],dataModel:b[2],dimension:b[3]?1:0}:{}}function B(a,h){return function Ba(a,c){if(!h[a])return!1;for(var k=0,d=h[a].length;k<d;k++)if(-1<b.inArray(h[a][k],c)||Ba(h[a][k],c.concat([a])))return!0;return!1}(a,[])}function u(b){return"number"===typeof b&&isNaN(b)}function F(b,a){return u(b)&&u(a)}function A(b,a){return null==b||u(b)||"number"===typeof b||!a&&(b instanceof Number||!(!(t(b)||b instanceof String)||!b.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}
function D(b,a){return null==b||"number"===typeof b&&parseInt(b)===b||!a&&(b instanceof Number&&parseInt(b)===parseFloat(b)||("string"===typeof b||b instanceof String)&&!!b.match(/^[+\-]{0,1}[0-9]+$/))}function C(b,a){return!!(null==b||t(b)||!a&&b instanceof String)}function f(a,c,d,e){var f=[];if(!e){var l=!1,G;for(G in a)if(a[G]&&!0===a[G].id){if(l&&(f.push(m(O)),d))return f;l=!0}if(!l&&(f.push(m(y)),d))return f}var l={},g;for(g in a){var i=null==a[g]?{}:a[g],s=!!i.id;if(!ja(g)&&(f.push(m(R,g)),
d))return f;var o=i.depend;if(null!=o){if(s&&(f.push(m(T,g)),d)||i.hasOwnProperty("defaultValue")&&(f.push(m(w,g)),d))return f;if(null==o.on){if(f.push(m(U,g)),d)return f}else for(var j=J(o.on),n=0,v=j.length;n<v;n++)if(!a.hasOwnProperty(j[n])){f.push(m(U,g));if(d)return f;break}if("function"!==typeof o.calc&&(f.push(m(W,g)),d))return f;l[g]=J(o.on)}j=i.type;s&&null==j&&(j="string");o={};if(null!=j)if(t(j))if(s&&"string"!==j&&"integer"!==j&&f.push("id指定されたプロパティにtypeを指定することはできません"),o=q(j),o.elmType){if(o.dataModel&&
(e&&(f.push(m(ha,g,o.dataModel)),d)||!c.models[o.dataModel]&&(f.push(m(V,g,o.dataModel)),d))||"enum"===o.elmType&&null==i.enumValue&&(f.push(m(X,g)),d))return f}else{if(f.push(m(ha,g,j)),d)return f}else if(f.push(m($,g)),d)return f;j=i.constraint;if(null!=j)if(b.isPlainObject(j)){for(G in j)if(n=j[G],null!=n)switch(G){case "notNull":if(!0!==n&&!1!==n){if(f.push(m(ba,g,G)),d)return f}else if(s&&!n&&(f.push(m(ca,g,G,n)),d))return f;break;case "min":case "max":switch(o.elmType){case "integer":if(t(n)||
!D(n)||u(n))if(f.push(m(P,g,G)),d)return f;break;case "number":if(t(n)||t(n)||!A(n)||Infinity===n||-Infinity===n||u(n))if(f.push(m(P,g,G)),d)return f;break;default:if(f.push(m(z,g,G,o.elmType)),d)return f}break;case "minLength":case "maxLength":switch(o.elmType){case "string":if(t(n)||!D(n)||u(n)||0>n){if(f.push(m(h,g,G)),d)return f}else if(s&&"maxLength"===G&&0===n&&(f.push(m(ca,g,G,n)),d))return f;break;default:if(f.push(m(z,g,G,o.elmType)),d)return f}break;case "notEmpty":switch(o.elmType){case "string":if(!0!==
n&&!1!==n){if(f.push(m(ba,g,G)),d)return f}else if(s&&!n&&(f.push(m(ca,g,G,n)),d))return f;break;default:if(f.push(m(z,g,G,o.elmType)),d)return f}break;case "pattern":switch(o.elmType){case "string":if("regexp"!==b.type(n)&&(f.push(m(p,g,G)),d))return f;break;default:if(f.push(m(z,g,G,o.elmType)),d)return f}}if(j.notEmpty&&0===j.maxLength&&(f.push(m(k,g,"notEmpty","maxLength")),d)||null!=j.min&&null!=j.max&&j.min>j.max&&(f.push(m(k,g,"min","max")),d)||null!=j.minLength&&null!=j.maxLength&&j.minLength>
j.maxLength&&(f.push(m(k,g,"minLength","maxLength")),d))return f}else if(f.push(m(S,g)),d)return f;j=i.enumValue;if(null!=j){if("enum"!==o.elmType&&(f.push(m(r,g)),d))return f;if(!b.isArray(j)||0===j.length||-1<b.inArray(null,j)||-1<b.inArray(void 0,j))if(f.push(m(N,g)),d)return f}if(s&&i.hasOwnProperty("defaultValue")&&(f.push(m(x,g)),d))return f}for(var Y in l)if(B(Y,l)&&(f.push(m(ea,G)),d))break;return f}function o(b,a,h){var c=[],d;for(d in b){var k=b[d];if(k&&(k.hasOwnProperty("defaultValue")||
!k.type||!("array"===k.type||q(k.type).dimension))&&k.hasOwnProperty("defaultValue"))if(k=k.defaultValue,a[d](k).length&&(c.push(m(G,d,k)),h))break}return c}function c(b,a){var h={},c;for(c in b){var d=h,k=c,p;p=a;var e=b[c]||{},r=[],x=null,f=0,x=e.type,N=e.constraint;e.id&&(x=x||"string",N=N||{},N.notNull=!0,"string"===x&&(N.notEmpty=!0));x&&(f=q(x),x=f.elmType,f=f.dimension,r.push(v(x,{manager:p,enumValue:e.enumValue})));e.constraint&&r.push(s(e.constraint));p=M({checkFuncs:r,dimension:f});d[k]=
p}return h}function s(b){return function(a){var h=[];b.notNull&&null==a&&h.push({notNull:b.notNull});b.notEmpty&&!a&&h.push({notEmpty:b.notEmpty});if(null==a)return h;null!=b.min&&a<b.min&&h.push({min:b.min});null!=b.max&&b.max<a&&h.push({max:b.max});null!=b.minLength&&a.length<b.minLength&&h.push({minLength:b.minLength});null!=b.maxLength&&b.maxLength<a.length&&h.push({maxLength:b.maxLength});null!=b.pattern&&!a.match(b.pattern)&&h.push({pattern:b.pattern});return h}}function v(a,h){var c=[{type:a}];
switch(a){case "number":return function(b,a){return A(b,a)?[]:c};case "integer":return function(b,a){return D(b,a)?[]:c};case "string":return function(b,a){return C(b,a)?[]:c};case "boolean":return function(b,a){return null==b||"boolean"===typeof b||!a&&b instanceof Boolean?[]:c};case "enum":return function(a){var d;a:if(d=h.enumValue,u(a)){for(var a=0,k=d.length;a<k;a++)if(u(d[a])){d=!0;break a}d=!1}else d=null===a||-1<b.inArray(a,d);return d?[]:c};case "any":return function(){return[]}}var d=a.match(/^@(.+?)$/)[1],
k=h.manager;return function(b){var a=k.models[d];return!a||"object"!==typeof b&&null!=b?c:null==b||a.has(b)?[]:c}}function M(a){var h=a.checkFuncs;if(!h||0===h.length)return function(){return[]};var c=a.dimension||0;return function(a,d){function k(a,e){if(!e){for(var r=0,x=h.length;r<x;r++){var f=h[r](a,d);if(f.length)return p=p.concat(f),!1}return!0}if(null==a)return!0;if(!b.isArray(a)&&!i.core.data.isObservableArray(a))return p.push({dimension:c}),!1;r=0;for(x=a.length;r<x;r++)if(!k(a[r],e-1))return!1;
return!0}var p=[];k(a,c);return p}}function K(a){var h={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c]?a[c].depend:null;if(d)for(var d=J(d.on),k=0,p=d.length;k<p;k++){var e=d[k];h[e]||(h[e]=[]);-1===b.inArray(c,h[e])&&h[e].push(c)}}return h}function E(){}function Q(){this.length=0;this._src=[]}function H(){return new Q}function g(b){return b&&b.constructor===Q?!0:!1}function a(a,h){var c=[],k=[],p=[],r;for(r in a)a[r]&&a[r].depend?k.push(r):c.push(r),a[r]&&a[r].type&&-1!==a[r].type.indexOf("[]")&&
p.push(r);this._internal={schema:a,_dependencyMap:K(a),dependProps:k,realProps:c,aryProps:p,_itemValueCheckFuncs:h,_nullProps:{}};this._values={};var x=[],f={props:{},target:this,type:"create"};for(r in a)if(-1!==b.inArray(r,p)){if(this._values[r]=H(),this._internal._nullProps[r]=!0,a[r].hasOwnProperty("defaultValue")&&null!=a[r].defaultValue&&(this._values[r].copyFrom(a[r].defaultValue),this._internal._nullProps[r]=!1),-1!==b.inArray(r,c))x.push(r),f.props[r]={newValue:this._values[r],oldValue:void 0}}else if(-1===
b.inArray(r,k))if(x.push(r),a[r]&&a[r].hasOwnProperty("defaultValue")){var N=a[r].defaultValue;this._values[r]=N;f.props[r]={newValue:N,oldValue:void 0}}else-1!==b.inArray(r,c)?(N=null,this._values[r]=N,f.props[r]={newValue:N,oldValue:void 0}):this._values[r]=void 0;n(this._internal,this,f,x);for(var g=["sort","reverse","pop","shift"],G=this,c=0,k=p.length;c<k;c++)r=p[c],function(a,c){var k;c.addEventListener("changeBefore",function(c){if(!G._internal.isInSet){var p=i.u.obj.argsToArray(c.args);if(-1===
b.inArray(c.method,g)){var r=!0;switch(c.method){case "splice":r=!1;p.shift();p.shift();break;case "copyFrom":p=p[0];break;case "set":p.shift()}r&&(c=h[a](p),0<c.length&&e(d,a,c))}k=G._values[a].slice(0)}});c.addEventListener("change",function(){G._internal.isInSet||c.equals(k)||G.dispatchEvent({type:"change",target:G,props:{oldValue:k,newValue:c}})})}(r,this._values[r])}var d=15102,l=15107,O=15800,y=15801,R=15802,T=15803,U=15804,W=15805,$=15806,ha=15807,V=15808,X=15809,S=15810,ba=15811,P=15812,z=
15813,p=15814,h=15815,k=15816,r=15817,N=15818,x=15819,G=15820,ca=15821,w=15822,ea=15823;E.prototype.hasEventListener=function(b,a){if(!this.__listeners)return!1;var h=this.__listeners[b];if(!h||!this.__listeners.hasOwnProperty(b))return!1;for(var c=0,d=h.length;c<d;c++)if(h[c]===a)return!0;return!1};E.prototype.addEventListener=function(a,h){(2!==arguments.length||!t(a)||!b.isFunction(h))&&e(15106);this.hasEventListener(a,h)||(this.__listeners||(this.__listeners={}),this.__listeners.hasOwnProperty(a)||
(this.__listeners[a]=[]),this.__listeners[a].push(h))};E.prototype.removeEventListener=function(b,a){if(this.hasEventListener(b,a))for(var h=this.__listeners[b],c=0,d=h.length;c<d;c++)if(h[c]===a){h.splice(c,1);break}};E.prototype.dispatchEvent=function(b){if(this.__listeners){var a=this.__listeners[b.type];if(a){b.target||(b.target=this);var h=!1;b.preventDefault=function(){h=true};for(var c=0,d=a.length;c<d;c++)a[c].call(b.target,b);return h}}};b.extend(Q.prototype,E.prototype);var Y={equals:function(a){var h=
this.length;if(!b.isArray(a)&&!g(a)||a.length!==h)return!1;for(var a=g(a)?a._src:a,c=0;c<h;c++){var d=this[c],k=a[c];if(!(d===k||F(d,k)))return!1}return!0},copyFrom:function(a){a||(a=[]);a=g(a)?a._src:a;b.isArray(a)||e(15108,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(b){return this[b]},set:function(b,a){this[b]=a},toArray:function(){return this.slice(0)},concat:function(){for(var b=i.u.obj.argsToArray(arguments),a=0,h=b.length;a<h;a++)g(b[a])&&
(b[a]=b[a].toArray());return this.concat.apply(this,b)}},ma="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),Z;for(Z in Y)Y.hasOwnProperty(Z)&&-1===b.inArray(Z,ma)&&ma.push(Z);var ua=["concat","slice","splice","filter","map"],Aa=["reverse","sort"],sa="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");Z=0;for(var ta=ma.length;Z<ta;Z++){var ka=ma[Z];Q.prototype[ka]=function(a){function h(){var d=
c.apply(this._src,arguments);if(-1!==b.inArray(a,Aa))d=this;else if(-1!==b.inArray(a,ua)){var k=H();k.copyFrom(d);d=k}return d}var c=Y[a]?Y[a]:Array.prototype[a];return-1===b.inArray(a,sa)?h:function(){if(!this.dispatchEvent({type:"changeBefore",method:a,args:arguments})){var b=h.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:a,args:arguments,returnValue:b});return b}}}(ka)}b.extend(a.prototype,E.prototype,{set:function(){var a={};2===arguments.length?
a[arguments[0]]=arguments[1]:a=arguments[0];this._internal.isInSet=!0;var h={},c;for(c in a){-1===b.inArray(c,this._internal.realProps)&&(-1!==b.inArray(c,this._internal.dependProps)&&e(15103,c),e(15104,c));var k=a[c];-1!==b.inArray(c,this._internal.aryProps)&&(null==k?(k=[],this._internal._nullProps[c]=!0):this._internal._nullProps[c]=!1);k=this._internal._itemValueCheckFuncs[c](k);k.length&&e(d,c,k)}k=[];for(c in a){var p=a[c],r=this._values[c];if(-1!==b.inArray(c,this._internal.aryProps)){if(this._values[c].equals(p))continue;
r=r.slice(0);this._values[c].copyFrom(p)}else{if(p===this._values[c]||F(p,this._values[c]))continue;this._values[c]=p}h[c]={oldValue:r,newValue:this._values[c]};k.push(c)}this._internal.isInSet=!1;0!=k.length&&(a={target:this,type:"change",props:h},n(this._internal,this,a,k),this.dispatchEvent(a))},get:function(a){if(0===arguments.length)return b.extend({},this._values);-1===b.inArray(a,this._internal.realProps)&&-1===b.inArray(a,this._internal.dependProps)&&e(15105,a);return this._values[a]},regardAsNull:function(a){return this._isArrayProp(a)?
!0===this._internal._nullProps[a]:null===this.get(a)},_isArrayProp:function(a){return-1!==b.inArray(a,this._internal.aryProps)?!0:!1}});i.u.obj.expose("h5.core.data",{createObservableArray:H,createObservableItem:function(b){"object"!==typeof b&&e(15100);var h=f(b,null,!0,!0);0<h.length&&e(15101,null,h);var h=c(b),d=o(b,h,!0);0<d.length&&e(15101,null,d);return new a(b,h)},isObservableArray:g,isObservableItem:function(b){return b instanceof a?!0:!1}});L.data={validateSchema:f,validateDefaultValue:o,
createCheckValueByDescriptor:c,createItemDescErrorReason:m,createDependencyMap:K,isIntegerValue:D,isNumberValue:A,isStringValue:C,isStrictNaN:u,isBothStrictNaN:F,unbox:function(a){if(b.isArray(a)){for(var a=a.slice(0),h=0,c=a.length;h<c;h++)a[h]=a[h]&&"object"===typeof a[h]?a[h]&&a[h].valueOf&&a[h].valueOf():a[h];return a}return a&&"object"===typeof a&&a.valueOf?a.valueOf():a},EventDispatcher:E,calcDependencies:n,getValue:function(a,b){return a._values[b]},setValue:function(a,b,h){a._values[b]=h},
isTypeArray:j,ITEM_ERRORS:{ERR_CODE_INVALID_ITEM_VALUE:d,ERR_CODE_DEPEND_PROPERTY:15103,ERR_CODE_CANNOT_GET_NOT_DEFINED_PROPERTY:15105,ERR_CODE_CANNOT_SET_NOT_DEFINED_PROPERTY:15104},ERR_CODE_INVALID_SCHEMA:15101}})();(function(){function j(h,c,d){var p=[];if(!b.isPlainObject(h))return p.push(T(K)),p;if(!ja(h.name)&&(p.push(T(E)),d))return p;var e=h.base,f=null;if(null!=e)if(!t(e)||0!==e.indexOf("@")){if(p.push(T(Q)),d)return p}else if(e=e.substring(1),c.models[e])f=c.models[e].schema;else if(p.push(T(H,
e)),d)return p;h=h.schema;if(!f&&null==h&&(p.push(T(g)),d))return p;if(!f&&!b.isPlainObject(h))return p.push(T(a)),p;h=b.extend(f,h);return p.concat(O(h,c,d))}function m(a,c,d,f,x,g){var l=[],w;for(w in d)if(w in a.schema||e(p.ERR_CODE_CANNOT_SET_NOT_DEFINED_PROPERTY,[a.name,w]),!(x&&-1!==b.inArray(w,x))){var z=S(c,w),j=d[w];if(a.schema[w]&&a.schema[w].depend){if(z===j)continue;e(p.ERR_CODE_DEPEND_PROPERTY,w)}var m=a.schema[w]&&a.schema[w].type;P(m)&&(null==j?(j=[],c._nullProps[w]=!0):c._nullProps[w]=
!1);m&&m.match(/string|number|integer|boolean/)&&(j=ha(j));if(-1===b.inArray(w,f)){var o=a._validateItemValue(w,j);0<o.length&&e(p.ERR_CODE_INVALID_ITEM_VALUE,w,o)}if(null!=j&&m&&m.match(/number|integer/)&&"number"!==typeof j)if(b.isArray(j)||i.core.data.isObservableArray(j))for(var o=0,n=j.length;o<n;o++)null!=j[o]&&$(j[o])&&(j[o]=parseFloat(j[o]));else null!=j&&(j=parseFloat(j));if((!P(m)||!z||!z.equals(j,z))&&z!==j)m&&-1!==m.indexOf("[]")&&i.core.data.isObservableArray(z)&&(z=z.slice(0)),l.push({p:w,
o:z,n:j})}if(l.length){d={};f=[];o=0;for(x=l.length;o<x;o++)w=l[o],a.schema[w.p]&&P(a.schema[w.p].type)?w.n&&S(c,w.p).copyFrom(w.n):ba(c,w.p,w.n),d[w.p]={oldValue:w.o,newValue:c.get(w.p)},f.push(w.p);l={type:!0===g?"create":"change",target:c,props:d};a=X(a,c,l,f,g);b.extend(d,a);return l}}function n(a){function c(a,h,d,k){var r=!1,f=["sort","reverse","pop","shift"];k.addEventListener("changeBefore",function(c){(h._model!==a||!a._manager)&&e(M,[h._values[a.idKey],c.method]);var k=l(c.args);if(-1===
b.inArray(c.method,f)){var g=!0;switch(c.method){case "splice":g=!1;k.shift();k.shift();break;case "copyFrom":k=k[0];break;case "set":k.shift()}g&&(c=a._validateItemValue(d,k),0<c.length&&e(p.ERR_CODE_INVALID_ITEM_VALUE,d,c))}a._manager&&(c=a._manager,k=a.name,c._oldValueLogs||(c._oldValueLogs={}),c._oldValueLogs[k]||(c._oldValueLogs[k]={}),c=c._oldValueLogs[k],k=h._values[a.idKey],c[k]||(c[k]={}),c[k][d]||(c[k][d]=S(h,d).toArray()));(r=a._manager?a._manager.isInUpdate():!1)||a._manager.beginUpdate()});
k.addEventListener("change",function(){var b={type:"change",target:h,props:{}};b.props[d]={};F(a,b);r||a._manager.endUpdate()})}function d(b){this._model=a;this._values={};this._nullProps={};var r={},g=[],l=[],z;for(z in b)f.hasOwnProperty(z)||e(p.ERR_CODE_CANNOT_SET_NOT_DEFINED_PROPERTY,[a.name,z]);for(var j in f){if((z=f[j])&&P(z.type)){var o=i.core.data.createObservableArray();o.relatedItem=this;ba(this,j,o);this._nullProps[j]=!0;l.push(j)}z&&z.depend?j in b&&e(p.ERR_CODE_DEPEND_PROPERTY,j):(o=
null,j in b?o=b[j]:(o=z&&void 0!==z.defaultValue?z.defaultValue:null,z&&P(z.type)&&g.push(j)),r[j]=o)}m(a,this,r,g,null,!0);b=0;for(r=l.length;b<r;b++)c(a,this,l[b],this.get(l[b]))}var f=a.schema;b.extend(d.prototype,V.prototype,{get:function(c){if(0===arguments.length)return b.extend({},this._values);f.hasOwnProperty(c)||e(p.ERR_CODE_CANNOT_GET_NOT_DEFINED_PROPERTY,[a.name,c]);return S(this,c)},set:function(b){var c=a.idKey;(this._model!==a||!this._model._manager)&&e(M,[S(this,c),"set"],this);var d=
b;2===arguments.length&&(d={},d[arguments[0]]=arguments[1]);c in d&&d[c]!==S(this,c)&&e(v,null,this);(c=a._manager?a._manager.isInUpdate():!1)||a._manager.beginUpdate();(d=m(a,this,d,null))&&F(a,d);c||a._manager.endUpdate()},getModel:function(){return this._model},regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===S(this,a)},_isArrayProp:function(a){return f[a]&&f[a].type&&-1<f[a].type.indexOf("[]")?!0:!1}});return d}function q(a,c,d){var p=d.base,d=d.schema;p&&(c||
e(ERR_CODE_NO_MANAGER),d=c.models[p.slice(1)].schema);b.extend(a,d)}function B(a){var b=a._manager,a=a.name;b._updateLogs||(b._updateLogs={});b._updateLogs[a]||(b._updateLogs[a]={});return b._updateLogs[a]}function u(a,b,c){if(a._manager)for(var d=B(a),p=0,e=c.length;p<e;p++){var f=c[p],g=f._values[a.idKey];d[g]||(d[g]=[]);d[g].push({type:b,item:f})}}function F(a,b){if(a._manager){var c=B(a),p=b.target._values[a.idKey];c[p]||(c[p]=[]);c[p].push({type:d,ev:b})}}function A(a,b,c){this.items={};this.size=
0;this.name=a.name;this._manager=b;var d={};q(d,b,a);this.schemaKeys=[];for(var p in d)d[p]&&!0===d[p].id&&(this.idKey=p),this.schemaKeys.push(p);this.schema=d;this._idType=(b=d[this.idKey].type)?"string"===b?f:o:f;b=[];p=[];for(var e in d)d[e]&&d[e].depend?p.push(e):b.push(e);this._dependencyMap=U(d);this._dependProps=p;this._realProps=b;this._itemValueCheckFuncs=c;this._itemConstructor=n(this,a)}function D(a){ja(a)||e(c);this.models={};this.name=a;this._updateLogs=null}function C(a,b){var c=j(a,
b,!0);0<c.length&&e(s,null,c);var d={};q(d,b,a);c=R(d,b);d=y(d,c,!0);0<d.length&&e(s,null,d);d=a.name;if(b.models[d])return b.models[d];c=new A(a,b,c);return b.models[d]=c}var f="string",o="number",c=15E3,s=15001,v=15003,M=15005,K=15900,E=15901,Q=15902,H=15903,g=15904,a=6,d=2,l=i.u.obj.argsToArray,O=L.data.validateSchema,y=L.data.validateDefaultValue,R=L.data.createCheckValueByDescriptor,T=L.data.createItemDescErrorReason,U=L.data.createDependencyMap,W=L.data.isIntegerValue,$=L.data.isNumberValue,
ha=L.data.unbox,V=L.data.EventDispatcher,X=L.data.calcDependencies,S=L.data.getValue,ba=L.data.setValue,P=L.data.isTypeArray,z=L.data.isBothStrictNaN,p=L.data.ITEM_ERRORS;b.extend(A.prototype,V.prototype,{create:function(a){this._manager||e(15006,[this.name,"create"]);"object"!==typeof a&&!b.isArray(a)&&e(15007);var c=[],d=this.idKey,f=this._manager?this._manager.isInUpdate():!1;f||this._manager.beginUpdate();for(var x=[],g=J(a),l=0,z=g.length;l<z;l++){var j=g[l],i=j[d];(""===i||null==i)&&e(15002);
!W(i,!0)&&!t(i)&&e(p.ERR_CODE_INVALID_ITEM_VALUE);var o=this._findById(i);o?(c.push(o),(i=m(this,o,j,null,[d]))&&F(this,i)):(j=new this._itemConstructor(j),this.items[i]=j,this.size++,x.push(j),c.push(j))}0<x.length&&u(this,1,x);f||this._manager.endUpdate();return b.isArray(a)?c:c[0]},get:function(a){if(b.isArray(a)||i.core.data.isObservableArray(a)){for(var c=[],d=0,p=a.length;d<p;d++)c.push(this._findById(a[d]));return c}return this._findById(a)},remove:function(a){this._manager||e(15006,[this.name,
"remove"]);var c=this._manager?this._manager.isInUpdate():!1;c||this._manager.beginUpdate();for(var d=this.idKey,p=J(a),f=[],g=[],l=0,z=p.length;l<z;l++)if(this.has(p[l])){var j=t(p[l])||W(p[l],!0)?p[l]:p[l]._values[d],i=this.items[j];delete this.items[j];this.size--;g.push(i);i._model=null;f.push(i)}else g.push(null);0<f.length&&u(this,3,f);c||this._manager.endUpdate();return b.isArray(a)?g:g[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},has:function(a){return t(a)||
W(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&b.isFunction(a.get)&&a===this.items[a.get(this.idKey)]:!1},getManager:function(){return this._manager},_validateItemValue:function(a,b){return this._itemValueCheckFuncs[a](b)},_findById:function(a){a=this.items[a];return void 0===a?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},
toArray:function(){var a=[],b=this.items,c;for(c in b)b.hasOwnProperty(c)&&a.push(b[c]);return a}});D.prototype=new V;b.extend(D.prototype,{createModel:function(a){if(b.isArray(a)){var c=a.length;c||e(s,null,[T(K)]);for(var d={},p=[],f=0;f<c;f++)try{p.push(a[f].name);var g=[];a[f].base&&g.push(a[f].base.substring(1));for(var l in a[f].schema){var z=a[f].schema[l];if(z){var j=z.type;j&&"@"===j.substring(0,1)&&(j=-1===j.indexOf("[]")?j.substring(1):j.substring(1,j.length-2),g.push(j))}}d[f]={depends:g}}catch(i){e(s)}for(l=
{size:0};l.size<c;){z={};j=!1;for(f=0;f<c;f++)if(!d[f].registed){for(var g=d[f].depends,o=0,m=g.length;o<m;o++)if(!this.models[g[o]]){z[g[o]]=!0;break}o===m&&(l[f]=C(a[f],this),l.size++,j=!0,d[f].registed=!0)}if(!j){var f=!0,n;for(n in z)if(-1===b.inArray(n,p)){f=!1;break}f&&e(15004);e(s,null,[T(H,n)])}}a=[];for(f=0;f<c;f++)a.push(l[f]);return a}return C(a,this)},dropModel:function(a){if((a=t(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];
return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=this._updateLogs,b=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var c={},p;for(p in a)if(a.hasOwnProperty(p)){var e;e=this.models[p];var f=a[p],g=[],l=[],j=[],o=[],m=void 0;for(m in f){for(var n=f[m],s=!0,y=[],v=n.length-1;0<=v;v--){var q=n[v],u=q.type;if(u===d)y.push(q.ev);else{a:{for(s=0;s<v;s++){var B=n[s].type;
if(1===B||3===B){v=n[s];break a}}v=null}if(1===u)v&&3===v.type?g.push({id:m,oldItem:v.item,newItem:q.item}):l.push(q.item);else if(v=v&&3===v.type?v.item:v?null:q.item)o.push(v),v.dispatchEvent({type:"remove",model:e});s=!1;break}}if(s&&0<y.length){q={};for(v=y.length-1;0<=v;v--)for(var t in y[v].props)q[t]||(i.core.data.isObservableArray(e.get(m).get(t))?(u=b&&b[e.name]&&b[e.name][m]&&b[e.name][m][t],e.get(m).get(t).equals(u)||(q[t]={oldValue:u})):q[t]={oldValue:y[v].props[t].oldValue});v=!1;for(t in q)u=
q[t].oldValue,n=e.get(m).get(t),u===n||z(u,n)?delete q[t]:(q[t].newValue=e.get(m).get(t),v=!0);v&&(y={type:"change",target:y[0].target,props:q},j.push(y),y.target.dispatchEvent(y))}}(e=0===l.length&&0===g.length&&0===o.length&&0===j.length?!1:{created:l,recreated:g,removed:o,changed:j})&&(c[p]=e)}a=!1;for(p in c)a=!0,e=c[p],this.models[p].dispatchEvent({type:"itemsChange",created:e.created,recreated:e.recreated,removed:e.removed,changed:e.changed});c={type:"itemsChange",models:c};a&&this.dispatchEvent(c)}},
_dataModelItemsChangeListener:function(a){var b=a.target.manager,c={};c[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:c})}});i.u.obj.expose("h5.core.data",{createManager:function(a,b){ja(a)||e(c);var d=new D(a);if(null!=b){""===b&&(b="window");var p={};p[a]=d;i.u.obj.expose(b,p)}return d},createSequence:function(a,c,d){function p(){return z}function e(){var a=z;z+=j;return a}function f(){return z.toString()}function g(){var a=z;z+=j;return a.toString()}function l(){}var z=null!=a?a:
1,j=null!=c?c:1,a=1===d?{current:f,next:g,returnType:1}:{current:p,next:e,returnType:2};a.setCurrent=function(a){z=a};b.extend(l.prototype,a);return new l},SEQ_STRING:1,SEQ_INT:2})})();(function(){function j(a,b){return!a||a.nodeType!==E?void 0:a.getAttribute(b)}function m(a){if(!a)return null;for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function n(a,b,c,d){var e=[],b=J(b);if(!0===d)return q(e,a,b,c),e;for(var a=a.childNodes,d=0,f=a.length;d<f;d++)q(e,a[d],b,c);return e}function q(a,
b,c,d){if(b.nodeType===E){for(var e=0,f=c.length;e<f;e++){var g=b.getAttribute(c[e]);if(void 0===d){if(null!==g){a.push(b);break}}else if(null!==g&&g==d){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;e=0;for(f=b.length;e<f;e++)q(a,b[e],c,d)}}}function t(a,c){for(var a=J(a),d=[],k=0,e=a.length;k<e;k++){var f=a[k];if(f.nodeType===E&&!(!0===c&&(null!=j(f,H)||null!=j(f,g))))for(var l=n(f,Q,void 0,!0),i=0,o=l.length;i<o;i++){for(var m=!0,s=l[i];null!=s&&s!==f;s=s.parentNode)if(null!=j(s,H)||
null!=j(s,g)){m=!1;break}m&&d.push(l[i])}}return b(d)}function u(a,c,d){for(var k=[],e=0,f=a.length;e<f;e++){var l=a[e];if(l.nodeType===E){if(!0===d){if(null!=l.getAttribute(c)){k.push(l);continue}if(null!=j(l,H)||null!=j(l,g))continue}for(var i=n(l,c,void 0,!1),o=0,m=i.length;o<m;o++){var s=b(i[o]).parent("[data-h5-context],[data-h5-loop-context]")[0];(void 0===s||s===l)&&k.push(i[o])}}}return b(k)}function F(a){return a&&a.addEventListener&&a.getModel&&!b.isArray(a)&&!i.core.data.isObservableArray(a)||
i.core.data.isObservableItem(a)?!0:!1}function A(a,b){for(var c=0,k=a.length;c<k;c++){var e=a[c];e.nodeType===E&&e.setAttribute(d,b)}}function D(c,d,h){var k=V++,f=d[0];b(f).empty();if(h){!b.isArray(h)&&!i.core.data.isObservableArray(h)&&e($);A(d,k);c._addBindingEntry(h,f,k);i.core.data.isObservableArray(h)&&!c._isWatching(h)&&(d=function(a){c._observableArray_changeListener(a)},c._listeners[c._getContextIndex(h)]=d,h.addEventListener("change",d));var d=j(f,a),d=m(c._getSrcCtxNode(d).childNodes),
g=[];c._loopElementsMap[k]=g;for(var k=document.createDocumentFragment(),l=h.get?function(a){return h.get(a)}:function(a){return h[a]},o=0,s=h.length;o<s;o++){for(var n=[],v=0,y=d.length;v<y;v++){var q=P(d[v]);n.push(q);k.appendChild(q)}g[o]=n;f.appendChild(k);C(c,n,l(o),!1,!0)}}}function C(a,c,d,k,r){c=J(c);if(k)D(a,c,d);else{k=V++;d&&(("object"!==typeof d||b.isArray(d)||i.core.data.isObservableArray(d))&&e($),A(c,k),a._addBindingEntry(d,c,k));var g=F(d);g&&!a._isWatching(d)&&(k=function(b){a._observableItem_changeListener(b)},
a._listeners[a._getContextIndex(d)]=k,d.addEventListener("change",k));t(c,r).each(function(){o(this,d,g)});f(a,c,d,!1,r);f(a,c,d,!0,r)}}function f(a,b,c,d,e){var f=d?"data-h5-loop-context":"data-h5-context";u(b,f,e).each(function(){var b=j(this,f),p=null;c&&(p=F(c)?c.get(b):c[b]);C(a,this,p,d)})}function o(a,c,d){for(var k=j(a,Q).split(R),f=[],g=[],l=[],i=0,o=k.length;i<o;i++){var m=k[i];if(-1===m.indexOf(y))0<b.trim(m).length&&(f.push(null),g.push(null),l.push(b.trim(m)));else{var s=m.split(y),m=
b.trim(s[0]),s=b.trim(s[1]),n=null,v=T.exec(m);v&&(n=v[1],m=/(\S+)[\s\(]/.exec(m)[1]);0<m.length&&0<s.length&&(f.push(m),g.push(n),l.push(s))}}k=b(a);i=0;for(o=f.length;i<o;i++)switch(s=f[i],n=g[i],v=l[i],m=null,c&&(m=d?c.get(v):c[v]),null==s&&("input"===a.tagName.toLowerCase()?(s="attr",n="value"):s="text"),s){case "text":null==m?k.text(""):k.text(m);break;case "html":null==m?k.html(""):k.html(m);break;case "class":var s=j(a,O),v=(n=null==s)?"":" ",q=!1;m&&(q=!RegExp("\\s"+m+"\\s").test(" "+s+" "));
k[0].className=(n?"":s)+(q?v+m:"");break;case "attr":n||e(U);null==m?k.removeAttr(n):k.attr(n,m);break;case "style":n||e(U);null==m?k.css(n,""):k.css(n,m);break;default:e(W)}}function c(a,b,c){for(var d=0,e=c.length;d<e;d++){var f=c[d];b.removeChild(f);a._removeBinding(f)}}function s(a){for(var a=a.childNodes,b=[],c=0,d=a.length;c<d;c++)b.push(P(a[c]));return b}function v(a,b,c,d,e){for(var f=document.createDocumentFragment(),g=[],l=0,j=e.length;l<j;l++){var i=s(c);g[l]=i;for(var m=0,o=i.length;m<
o;m++)f.appendChild(i[m]);C(a,i,e[l])}Array.prototype[d].apply(b,g);return f}function M(a,b,d,k,e,f){var g=k.length;if(0!==g){for(var l=k[0],i=l,d=1===g?d.length:i+k[1];i<d;i++){var j=e[i];j&&c(a,b,j)}e.splice(l,k[1]);if(!(2>=g)){i=e.length;i=0===i||0===l?b.firstChild:l>=i?null:e[l][0];d=document.createDocumentFragment();l=[l,0];for(j=2;j<g;j++){for(var m=s(f),o=0,n=m.length;o<n;o++)d.appendChild(m[o]);C(a,m,k[j]);l.push(m)}b.insertBefore(d,i);Array.prototype.splice.apply(e,l)}}}function K(b,c){void 0!==
b.nodeType?b.nodeType===E&&(this._parent=b.parentNode,this._targets=[b]):(this._parent=b[0].parentNode,this._targets=m(b));this._bindRootId=X++;S[this._bindRootId]=this;for(var d=[],k=0,e=this._targets.length;k<e;k++){var f=this._targets[k];if(f.nodeType===E){f.setAttribute(l,this._bindRootId);for(var i=n(f,[H,g],void 0,!0),o=0,s=i.length;o<s;o++){var v=ha++;i[o].setAttribute(a,v)}i=n(f,Q,void 0,!0);o=0;for(s=i.length;o<s;o++)v=i[o],/class\s*:/.test(j(v,Q))&&""!=v.className&&v.setAttribute(O,v.className)}d.push(f.cloneNode(!0))}this._srces=
d;this._loopElementsMap={};this._rootContext=c;this._usingContexts=[];this._srcToViewMap={};this._listeners={};C(this,this._targets,this._rootContext,!1,!0)}var E=1,Q="data-h5-bind",H="data-h5-context",g="data-h5-loop-context",a="data-h5-dyn-ctx",d="data-h5-dyn-vid",l="data-h5-dyn-bind-root",O="data-h5-dyn-cn",y=":",R=";",T=/\(\s*(\S+)\s*\)/,U=7100,W=7101,$=7102,ha=0,V=0,X=0,S={},L={},P;(function(){var a=document.createElement("div");a.h5Dummy="a";var c=a.cloneNode(!1),d=void 0!==c.h5Dummy;a.h5Dummy=
void 0;d?(c.h5Dummy=void 0,P=function(a){return a.nodeType===E?b(b.trim(a.outerHTML))[0]:a.cloneNode(!0)}):P=function(a){return a.cloneNode(!0)}})();b.extend(K.prototype,{unbind:function(){for(var b=0,c=this._targets.length;b<c;b++){var d=this._targets[b];if(d.nodeType===E){this._removeBinding(d);d.removeAttribute(l);for(var e=n(d,O,void 0,!0),f=0,g=e.length;f<g;f++)e[f].removeAttribute(O);d=n(d,a,void 0,!0);f=0;for(e=d.length;f<e;f++)d[f].removeAttribute(a)}}delete S[this._bindRootId]},_observableArray_changeListener:function(b){var d=
this._getViewsFromSrc(b.target);if(d)for(var h in d)if(d.hasOwnProperty(h)){var e=d[h],f=this._getSrcCtxNode(j(e,a)),g=this._loopElementsMap[h];switch(b.method){case "set":M(this,e,b.target,[b.args[0],1,b.args[1]],g,f);break;case "shift":case "pop":var l=g[b.method]();l&&c(this,e,l);break;case "unshift":l=v(this,g,f,b.method,b.args);e.insertBefore(l,e.firstChild);break;case "push":l=v(this,g,f,b.method,b.args);e.appendChild(l);break;case "splice":M(this,e,b.target,b.args,g,f);break;case "reverse":for(var l=
e,i=g;l.firstChild;)l.removeChild(l.firstChild);for(var o=0,e=i.length;o<e;o++)for(var f=i[o],m=f.length-1;0<=m;m--)l.insertBefore(f[m],l.firstChild);g.reverse();break;case "sort":case "copyFrom":for(var l=this._loopElementsMap,i=h,o=b.target,m=g,g=f,f=0,n=m.length;f<n;f++)c(this,e,m[f]);for(var m=document.createDocumentFragment(),n=[],f=0,y=o.length;f<y;f++){var q=s(g);n[f]=q;for(var u=0,t=q.length;u<t;u++)m.appendChild(q[u]);C(this,q,o.get(f))}e.appendChild(m);l[i]=n}}},_observableItem_changeListener:function(b){var c=
this._getViewsFromSrc(b.target);if(c){var d=!1;b.target===this._rootContext&&(d=!0);var e=this,f;for(f in c)if(c.hasOwnProperty(f)){var l=c[f];t(l,d).each(function(){o(this,b.target,!0)});u(l,H).each(function(){var c=j(this,H);if(!(c in b.props))return!0;e._removeBinding(this);var d=j(this,a),d=e._getSrcCtxNode(d),d=P(d);this.parentNode.replaceChild(d,this);C(e,d,b.props[c].newValue)});u(l,g).each(function(){var a=j(this,g);if(!(a in b.props)||b.target._isArrayProp(a))return!0;e._removeBinding(this);
C(e,this,b.props[a].newValue,!0)})}}},_getSrcCtxNode:function(b){for(var c=0,d=this._srces.length;c<d;c++){var e=this._srces[c];if(j(e,a)===b)return e;e=n(e,a,b);if(0<e.length)return e[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(a){return b.inArray(a,this._usingContexts)},_addBindingEntry:function(a,b,c){var d=this._getContextIndex(a);-1===d&&(this._usingContexts.push(a),d=this._usingContexts.length-1);L[c]=
a;(a=this._srcToViewMap[d])?a[c]=b:(a={},a[c]=b,this._srcToViewMap[d]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=L[a];if(b){var c=this._getContextIndex(b);if(-1!==c){var d=this._srcToViewMap[c];d&&d[a]&&(delete d[a],this._hasBindingForSrc(d)||(d=!1,F(b)?(b.removeEventListener("change",this._listeners[c]),d=!0):i.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[c]),d=!0),d&&delete this._listeners[c],
delete this._srcToViewMap[c]))}L[a]&&delete L[a]}},_removeBinding:function(a){if(a.nodeType===E){var b=j(a,d);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(d));for(var a=n(a,d),b=0,c=a.length;b<c;b++){var e=a[b];this._removeBindingEntry(j(e,d));e.removeAttribute(d)}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});pa={createBinding:function(a,b){return new K(a,b)}}})();(function(){function j(c){return i.u.obj.isJQueryObject(c)?c:b(c)}function m(){this.__cachedTemplates=
{}}var n="[",q=7001,B=7002,u=7003,F=7010,A=7011,D=i.async.deferred,C={escapeHtml:function(b){return i.u.str.escapeHtml(b)}},f={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(b,e,f){this.cacheUrls.length>=this.MAX_CACHE&&this.deleteCache(this.cacheUrls[0]);this.cache[b]={};this.cache[b].templates=e;this.cache[b].path=f;this.cacheUrls.push(b)},deleteCache:function(b,e){e||delete this.cache[b];for(var f=0,i=this.cacheUrls.length;f<i;f++)if(this.cacheUrls[f]===b){this.cacheUrls.splice(f,
1);break}},getTemplateByUrls:function(c){function f(a){if(0!==a.length){var c={},d=[];a.each(function(){var a=b.trim(this.id),f=b.trim(this.innerHTML);a||e(B,null,{});try{var l=new EJS.Compiler(f,n);l.compile();c[a]=l.process;d.push(a)}catch(g){f=g.lineNumber,e(F,[f?" line:"+f:"",g.message],{id:a,error:g,lineNo:f})}});return{compiled:c,data:{ids:d}}}}function j(a,c,d){i.ajax(c).done(function(c,e,g){delete C.accessingUrls[a];c=b(g.responseText).filter(function(){return this.tagName&&-1===this.tagName.indexOf("/")&&
8!==this.nodeType});e=this.url;if(0<c.not('script[type="text/ejs"]').length)d.reject(da(A,null,{url:a,path:e}));else{g=null;try{g=f(c.filter('script[type="text/ejs"]'))}catch(l){l.detail.url=a;l.detail.path=e;d.reject(l);return}var i,j;try{var o=g.compiled;j=g.data;j.path=e;j.absoluteUrl=a;i=o;C.append(a,o,e)}catch(m){d.reject(da(q,null,{error:m,url:a,path:e}));return}d.resolve({ret:i,data:j})}}).fail(function(b){delete C.accessingUrls[a];d.reject(da(u,[b.status,a],{url:a,path:c,error:b}))})}for(var o=
{},m=[],t=[],C=this,H=function(a){var b=C.cache[a].templates;C.deleteCache(a,!0);C.cacheUrls.push(a);return b},g=0;g<c.length;g++){var a=c[g],d=ga(a);if(this.cache[d])b.extend(o,H(d)),t.push({absoluteUrl:d});else if(this.accessingUrls[d])m.push(this.accessingUrls[d]);else{var l=i.async.deferred();m.push(this.accessingUrls[d]=l.promise());j(d,a,l)}}var O=D();i.async.when(m).done(function(){for(var a=i.u.obj.argsToArray(arguments),c=0,d=a.length;c<d;c++)b.extend(o,a[c].ret),t.push(a[c].data);O.resolve(o,
t)}).fail(function(a){O.reject(a)});return O.promise()}};b.extend(m.prototype,{load:function(c){var i=D(),j=this,o=null;switch(b.type(c)){case "string":b.trim(c)||e(7004);o=[c];break;case "array":o=c;0===o.length&&e(7004);for(var c=0,m=o.length;c<m;c++)t(o[c])?b.trim(o[c])||e(7004):e(7004);break;default:e(7004)}f.getTemplateByUrls(o).done(function(c,e){b.extend(j.__cachedTemplates,c);i.resolve(e)}).fail(function(b){i.reject(b)});return i.promise()},getAvailableTemplates:function(){var b=[],e;for(e in this.__cachedTemplates)b.push(e);
return b},register:function(c,f){"string"!==b.type(f)?e(7E3,null,{id:c}):(!t(c)||!b.trim(c))&&e(B,[]);try{var i=new EJS.Compiler(f,n);i.compile();this.__cachedTemplates[c]=i.process}catch(o){i=o.lineNumber,e(F,[i?" line:"+i:"",o.message],{id:c})}},isValid:function(b){try{return(new EJS.Compiler(b,n)).compile(),!0}catch(e){return!1}},get:function(c,f){var i=this.__cachedTemplates;if(b.isEmptyObject(i))return null;(!t(c)||!b.trim(c))&&e(B);(i=i[c])||e(7005,c);var o=f?b.extend(!0,{},f):{},j=o.hasOwnProperty("_h")?
new EJS.Helpers(o):new EJS.Helpers(o,{_h:C}),m=null;try{m=i.call(o,o,j)}catch(n){e(7006,n.toString(),n)}return m},update:function(b,e,f){return j(b).html(this.get(e,f))},append:function(b,e,f){return j(b).append(this.get(e,f))},prepend:function(b,e,f){return j(b).prepend(this.get(e,f))},isAvailable:function(b){return!!this.__cachedTemplates[b]},clear:function(c){if(void 0===c)this.__cachedTemplates={};else{var f=null;switch(b.type(c)){case "string":f=[c];break;case "array":c.length||e(B);f=c;break;
default:e(B)}for(var c=0,i=f.length;c<i;c++){var o=f[c];(!t(o)||!b.trim(o))&&e(B)}c=0;for(i=f.length;c<i;c++)delete this.__cachedTemplates[f[c]]}},bind:function(c,f){var o=null;null==c&&e(7007);b.isArray(c)?o=c:(o=b(c),0===o.length&&e(7007),o=o.toArray());(null==f||"object"!==typeof f||b.isArray(f)||i.core.data.isObservableArray(f))&&e(7009);return pa.createBinding(o,f)}});var o=new m;o.createView=function(){return new m};b(function(){b('script[type="text/ejs"]').each(function(){var c=b.trim(this.id),
e=b.trim(this.innerHTML);0!==e.length&&c&&(e=new EJS.Compiler(e,n),e.compile(),o.__cachedTemplates[c]=e.process)})});i.u.obj.expose("h5.core",{view:o})})();(function(){function e(a){var c={},f;for(f in d){var g=b("<div></div>").addClass(a).addClass(f).appendTo("body"),l=b.camelCase(f);c[l]={};b.map(d[f],function(a){c[l][a]="width"===a||"height"===a?parseInt(g.css(a).replace(/\D/g,""),10):g.css(a)});g.remove()}return c}function m(a,b){var c=window.document.createElement("v:"+a),d;for(d in b)c.style[d]=
b[d];return c}function n(a,b){for(var c=[],d=a/2,e=0.8*a/2,f=360/b*Math.PI/180,g=1;g<=b;g++){var l=f*g,i=Math.cos(l),l=Math.sin(l);c.push({from:{x:d+e/2*i,y:d+e/2*l},to:{x:d+e*i,y:d+e*l}})}return c}function q(a){return function(){var b=document.body,c=document.documentElement,d=y?b:R?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function B(a){return function(){var b=
y?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function u(a){var b=y?document.body:document.documentElement;return H.isiOS?window["inner"+a]:b["client"+a]}function F(a){var c=b(a)[0],d=document.body,e=b("html")[0],a={top:0,left:0};if(c===d&&R)return{top:parseFloat(e.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(e.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||
0)+parseFloat(d.currentStyle.borderLeft||0)};"undefined"!==typeof c.getBoundingClientRect&&(a=c.getBoundingClientRect());d=y?d:document.documentElement;c=d.clientTop||0;d=d.clientLeft||0;return{top:a.top+X()-c,left:a.left+S()-d}}function A(){b.each(a(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function D(a){a=g(a)?a[0]:a;return a===
window||a===document||a===document.body}function C(a){this.style=b.extend(!0,{},a);a=this.style.throbber.width;this.group=m("group",{width:a+"px",height:this.style.throbber.height+"px"});this.group.className=M;for(var a=n(a,this.style.throbber.lines),c=this.style.throbberLine.color,d=this.style.throbberLine.width,e=0,f=a.length;e<f;e++){var g=a[e],l=g.from,i=g.to,g=m("line");g.strokeweight=d;g.strokecolor=c;g.fillcolor=c;g.from=l.x+","+l.y;g.to=i.x+","+i.y;l=m("stroke");l.opacity=1;g.appendChild(l);
this.group.appendChild(g)}this._createPercentArea()}function f(a,d){var f=this,g=b(a),l=b.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a"},d);this._displayed=!1;this._throbbers=[];this._settings=l;this._styles=b.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},e(l.theme));this._$target=(this._isScreenLock=D(g))?b("body"):g;this._target=1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;
this._scrollHandler=function(){f._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){f._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof l.fadeIn?l.fadeIn:-1;this._fadeOutTime="number"===typeof l.fadeOut?l.fadeOut:-1;this._$content=b();this._$overlay=b();this._$skin=b();for(var g=i.u.str.format(K,""===l.message?'style="display: none;"':"",l.message),m="https"===document.location.protocol?"return:false":
"about:blank",n=0,q=this._$target.length;n<q;n++)this._$content=this._$content.add(b("<div></div>").append(g).addClass(o).addClass(l.theme).addClass(c).hide()),this._$overlay=this._$overlay.add((l.block?b("<div></div>"):b()).addClass(o).addClass(l.theme).addClass(s).hide()),this._$skin=this._$skin.add((R||y?b("<iframe></iframe>"):b()).attr("src",m).addClass(o).addClass(v).hide());var w=this._isScreenLock&&U?"fixed":"absolute";b.each([this._$overlay,this._$content],function(){this.css("position",w)});
l=l.promises;g=function(){f.hide()};b.isArray(l)?(b.map(l,function(a){return J(a)?a:null}),0<l.length&&i.async.when(l).pipe(g,g)):J(l)&&l.pipe(g,g)}var o="h5-indicator",c="content",s="overlay",v="skin",M="vml-root",K='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',E=500,J=i.async.isPromise,H=i.env.ua,g=i.u.obj.isJQueryObject,a=i.u.obj.argsToArray,d={throbber:["width","height"],"throbber-line":["width","color"]},l=!!document.createElement("canvas").getContext,
O=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),y="CSS1Compat"!==document.compatMode,R=H.isIE&&6>=H.browserVersion,T=H.isChrome&&H.isDesktop,U=!(H.isAndroidDefaultBrowser||H.isiOS&&5>H.browserVersion||R||y||H.isWindowsPhone),W=null,$=null,L=null,V=null,X=null,S=null,ba=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div")),
c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(e){e=b.camelCase(e);if(e in a.style)return!0;for(var e=e.charAt(0).toUpperCase()+e.slice(1),f=0;f<d;f++)if(c[f]+e in a.style)return!0;return!1}}(),$=function(a){return function(){var b=document.body,c=document.documentElement;return"number"===typeof window["inner"+a]?window["inner"+a]:y?b["client"+a]:c["client"+a]}}("Height"),L=q("Height"),V=q("Width"),X=B("Top"),S=B("Left");if(!l&&O){document.namespaces.add("v","urn:schemas-microsoft-com:vml");
var P=document.createElement("style");P.setAttribute("type","text/css");P.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }";document.getElementsByTagName("head")[0].appendChild(P)}W=ba("animationName");C.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){for(var a=this.style.throbber.lines,
b=this.style.throbber.roundTime,c=this.highlightPos,d=this.group.childNodes,e=0,f=d.length;e<f;e++){var l=d[e];if("textbox"!==l.nodeName){var g=e+1;l.firstChild.opacity=g==c?"1":g==c+1||g==c-1?"0.75":"0.4"}}c==a?c=0:c++;this.highlightPos=c;var i=this;this._runId=setTimeout(function(){i._run.call(i)},Math.floor(b/a))},_createPercentArea:function(){var a=m("textbox"),c=b("<table><tr><td></td></tr></table>"),d=c.find("td");d.width(this.group.style.width);d.height(this.group.style.height);d.css("line-height",
this.group.style.height);d.addClass("throbber-percent");a.appendChild(c[0]);this.group.appendChild(a)},setPercent:function(a){b(this.group).find(".throbber-percent").html(a)}};var z=function(a){this.style=b.extend(!0,{},a);this.canvas=document.createElement("canvas");this.baseDiv=document.createElement("div");this.percentDiv=document.createElement("div");var a=this.canvas,c=this.baseDiv,d=this.percentDiv;a.width=this.style.throbber.width;a.height=this.style.throbber.height;a.style.display="block";
a.style.position="absolute";c.style.width=this.style.throbber.width+"px";c.style.height=this.style.throbber.height+"px";c.appendChild(a);d.style.width=this.style.throbber.width+"px";d.style.height=this.style.throbber.height+"px";d.style.lineHeight=this.style.throbber.height+"px";d.className="throbber-percent";c.appendChild(d);this.positions=n(a.width,this.style.throbber.lines)};z.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},
hide:function(){b(this.baseDiv).remove();this._runId&&(T?clearInterval(this._runId):clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.canvas,b=a.getContext("2d"),c=this.highlightPos,d=this.positions,e=this.style.throbberLine.color,f=this.style.throbberLine.width,l=this.style.throbber.lines,g=this.style.throbber.roundTime;a.width=a.width;for(var i=0,o=d.length;i<o;i++){b.beginPath();b.strokeStyle=e;b.lineWidth=f;var j=i+1;b.globalAlpha=j==c?1:j==c+1||j==c-1?0.75:0.4;var m=d[i],
j=m.from,m=m.to;b.moveTo(j.x,j.y);b.lineTo(m.x,m.y);b.stroke()}c==l?c=0:c++;this.highlightPos=c;if(T){var n=0;this._runId=setInterval(function(){n++;a.style.webkitTransform="rotate("+n+"deg)";360<=n&&(n-=360)},g/360)}else if(W)a.className="throbber-canvas";else{var s=this;this._runId=setTimeout(function(){s._run.call(s)},Math.floor(g/l))}},setPercent:function(a){this.percentDiv.innerHTML=a}};f.prototype={show:function(){if(this._displayed||0<this._$target.children("."+o).length)return this;this._displayed=
!0;for(var a=this,c=this._fadeInTime,d=function(){var c=b(window);a._isScreenLock&&(A(a._$overlay,a._$content),U||(c.bind("touchmove",a._scrollHandler),c.bind("scroll",a._scrollHandler)));c.bind("orientationchange",a._resizeHandler);c.bind("resize",a._resizeHandler)},e=0,f=this._$target.length;e<f;e++){var g=this._$target.eq(e),i=this._$content.eq(e),j=this._$skin.eq(e),m=this._$overlay.eq(e);!this._isScreenLock&&"static"===g.css("position")&&(g.data("before-position",g.css("position")),g.data("before-zoom",
g.css("zoom")),g.css({position:"relative",zoom:"1"}));var n=l?new z(this._styles):O?new C(this._styles):null;n&&(a._throbbers.push(n),a.percent(this._settings.percent),n.show(i.children(".indicator-throbber")[0]));g.append(j).append(m).append(i)}e=b().add(this._$skin).add(this._$content).add(this._$overlay);0>c?(e.show(),d()):e.fadeIn(c,d);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!this._isScreenLock||!U)for(var c=0,d=this._$target.length;c<d;c++){b=
this._$target.eq(c);var e=this._$overlay.eq(c),f=this._$skin.eq(c);if(this._isScreenLock)a=V(),b=L();else{var g=b[0];a=g.scrollWidth;b=g.scrollHeight;if(R)a=Math.max(a,g.clientWidth),b=Math.max(b,g.clientHeight);else if(H.isIE&&"function"===typeof getComputedStyle){var g=getComputedStyle(g,null),l=parseFloat(g.width)+parseFloat(g.paddingLeft)+parseFloat(g.paddingRight);a+=l-parseInt(l)-1;g=parseFloat(g.height)+parseFloat(g.paddingTop)+parseFloat(g.paddingBottom);b+=g-parseInt(g)-1}}e.width(a).height(b);
(R||y)&&f.width(a).height(b)}},_reposition:function(){for(var a=0,c=this._$target.length;a<c;a++){var d=this._$target.eq(a),e=this._$content.eq(a);if(this._isScreenLock){var f=$();U?e.css("top",(f-e.outerHeight())/2+"px"):e.css("top",X()+f/2-e.outerHeight()/2+"px")}else e.css("top",d.scrollTop()+(d.innerHeight()-e.outerHeight())/2);var f=e.innerWidth()-e.width(),g=0;e.children().each(function(){var a=b(this);if("none"===a.css("display"))return!0;g+=a.outerWidth(!0)});e.width(g+f);e.css("left",d.scrollLeft()+
(d.innerWidth()-e.outerWidth())/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var a=this,c=this._fadeOutTime,d=b().add(this._$skin).add(this._$content).add(this._$overlay),e=function(){var c=b(window);d.remove();a._isScreenLock||a._$target.each(function(a,c){var d=b(c);d.css({position:d.data("before-position"),zoom:d.data("before-zoom")});d.removeData("before-position").removeData("before-zoom")});c.unbind("touchmove",a._scrollHandler);c.unbind("scroll",a._scrollHandler);
c.unbind("orientationchange",a._resizeHandler);c.unbind("resize",a._resizeHandler);a._resizeEventTimerId&&clearTimeout(a._resizeEventTimerId);a._scrollEventTimerId&&clearTimeout(a._scrollEventTimerId)};if(!W||T)for(var f=0,g=this._throbbers.length;f<g;f++)this._throbbers[f].hide();0>c?(d.hide(),e()):d.fadeOut(c,e);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,c=this._throbbers.length;b<c;b++)this._throbbers[b].setPercent(a);
return this},message:function(a){if(!t(a))return this;if(!this._redrawable)return this._lastMessage=a,this;this._$content.children(".indicator-message").css("display","inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();
b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);this._redrawable=!1;U||R||y?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};i.u.obj.expose("h5.ui",{indicator:function(a,b){return new f(a,b)},isInView:function(a,c){var d,e,f,g,l=b(a);if(void 0===c)e=u("Height"),g=u("Width"),d=X(),f=S();else{g=b(c);if(0===g.find(l).length)return;f=F(g);d=f.top+parseInt(g.css("border-top-width"));
f=f.left+parseInt(g.css("border-left-width"));e=g.innerHeight();g=g.innerWidth()}e=d+e;g=f+g;var i=F(l),o=i.top,i=i.left,j=o+l.outerHeight(),l=i+l.outerWidth();return(d<=o&&o<e||d<j&&j<=e)&&(f<=i&&i<g||f<l&&l<=g)},scrollToTop:function(){function a(){1===window.scrollY&&(c=0);0<c&&(window.scrollTo(0,1),c--,setTimeout(a,E))}var c=3;window.scrollTo(0,1);1!==b(window).scrollTop&&setTimeout(a,E)}})})();(function(){function j(){var e=b.mobile.activePage,e=e&&e[0].id;return t(e)&&0<e.length?e:null}function m(){var b=
j();null!==b&&(n.addCSS(b),n.bindController(b))}var n=null,q={},B={},u={},F={},A={},D=!1;i.u.obj.ns("h5.ui.jqm");i.ui.jqm.dataPrefix="h5";var C={__name:"JQMController",__ready:function(){var e=this;b(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){e.loadScript(this.id)})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(b){b=b.event.target.id;this.loadScript(b);this.addCSS(b);this.bindController(b)},"{document} pageremove":function(b){var b=b.event.target.id,e=
B[b],c=u[b];if(e){for(var i=0,j=e.length;i<j;i++)e[i].dispose();B[b]=[]}if(c){i=0;for(j=c.length;i<j;i++)c[i].dispose();u[b]=[]}},"{document} pagebeforeshow":function(b){var b=b.event.target.id,e=null;this.addCSS(b);for(e in B)for(var c=B[e],i=b===e,j=0,m=c.length;j<m;j++){var n=c[j];i?n.enableListeners():n.disableListeners()}for(e in u){c=u[e];i=b===e;j=0;for(m=c.length;j<m;j++)n=c[j],i?n.enableListeners():n.disableListeners()}},"{document} pagehide":function(b){this.removeCSS(b.event.target.id)},
"{rootElement} h5controllerbound":function(e){e=e.evArg;if(this!==e){var i=j();null!==i&&-1===b.inArray(e,B[i])&&(u[i]||(u[i]=[]),u[i].push(e))}},"{rootElement} h5controllerunbound":function(e){var i=e.evArg,e=j();null!==e&&(i=b.inArray(i,u[e]),-1!==i&&u[e].splice(i,1))},loadScript:function(e){var e=b("#"+e),j=b.trim(e.data(this.getDataAttribute("script")));if(0!==j.length)return j=b.map(j.split(","),function(c){return b.trim(c)}),e=!0==e.data(this.getDataAttribute("async")),i.u.loadScript(j,{async:e})},
getDataAttribute:function(b){var e=i.ui.jqm.dataPrefix;null==e&&(e="h5");return 0!==e.length?e+"-"+b:b},bindController:function(b){var e=q[b],c=F[b];if(e&&0!==e.length){B[b]||(B[b]=[]);for(var j=B[b],m=0,n=e.length;m<n;m++){for(var u=e[m],t=!1,C=0,A=j.length;C<A;C++){var g=j[C];if(g&&g.__name===u.__name){t=!0;break}}t||B[b].push(i.core.controller("#"+b,u,c[m]))}}},addCSS:function(e){if(e=A[e])for(var i=document.getElementsByTagName("head")[0],c=i.getElementsByTagName("link"),j=c.length,m=0,n=e.length;m<
n;m++){for(var q=b.mobile.path.parseUrl(e[m]).filename,u=!1,t=0;t<j;t++)if(b.mobile.path.parseUrl(c[t].href).filename===q){u=!0;break}u||(q=document.createElement("link"),q.type="text/css",q.rel="stylesheet",q.href=e[m],i.appendChild(q))}},removeCSS:function(e){var i=A[e];if(i&&(e=j(),null!==e)){var c=A[e];b("link").filter(function(){var e=b(this).attr("href");return-1!==b.inArray(e,i)&&-1===b.inArray(e,c)}).remove()}}};i.u.obj.expose("h5.ui.jqm.manager",{init:function(){D||(D=!0,b(function(){n=L.controllerInternal("body",
C,null,{managed:!1});m()}))},define:function(f,i,c,s){t(f)||e(12E3,"id");null!=i&&!t(i)&&!b.isArray(i)&&e(12E3,"cssSrc");null!=c&&((t(c)||b.isArray(c))&&e(12001),(!b.isPlainObject(c)||!("__name"in c))&&e(12E3,"controllerDefObject"),null!=s&&!b.isPlainObject(s)&&e(12E3,"initParam"));A[f]||(A[f]=[]);q[f]||(q[f]=[]);F[f]||(F[f]=[]);b.merge(A[f],b.map(b.makeArray(i),function(c){return b.inArray(c,A[f])!==-1?null:c}));c&&-1===b.inArray(c,q[f])&&(q[f].push(c),F[f].push(s));null!==j()&&n?m():this.init()}})})();
(function(){function j(){q||(q=navigator.geolocation);return q}function m(b,e){this.oblateness=b;this.semiMajorAxis=e}function n(){}var q=null,t=i.env.ua;m.prototype.getOblateness=function(){return this.oblateness};m.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var u=new m(298.257222,6378137),F=new m(299.152813,6377397.155),A=Math.PI/180;b.extend(n.prototype,{isSupported:t.isIE&&9<=t.browserVersion?!0:!!j(),getCurrentPosition:function(b){var e=i.async.deferred();j().getCurrentPosition(function(b){e.resolve(b)},
function(b){e.reject(da(2002,null,b))},b);return e.promise()},watchPosition:function(b){function e(){}var f=i.async.deferred(),m=j().watchPosition(function(b){f.notify(b)},function(b){j().clearWatch(m);f.reject(da(2002,null,b))},b);e.prototype.unwatch=function(){j().clearWatch(m);f.resolve()};return f.promise(new e)},getDistance:function(b,i,f,j,c){(!isFinite(b)||!isFinite(i)||!isFinite(f)||!isFinite(j))&&e(2E3);var n=c?c:u;n instanceof m||e(2001);var c=n.getSemiMajorAxis(),q=n.getOblateness(),b=
b*A,i=i*A,f=f*A,n=j*A,j=(b+f)/2,q=Math.sqrt(2*q-1)/q,q=Math.pow(q,2),t=Math.sqrt(1-q*Math.pow(Math.sin(j),2)),q=c*(1-q)/Math.pow(t,3),c=c/t,i=i-n;return Math.sqrt(Math.pow(q*(b-f),2)+Math.pow(c*Math.cos(j)*i,2))},GS_GRS80:u,GS_BESSEL:F});i.u.obj.expose("h5.api",{geo:new n})})();(function(){function j(a,b){for(var c=a._tasks,e=c.length-1;0<=e;e--)c[e].deferred.reject(da(Q,["SQLDB ERROR(code="+b.code+")",b.message],b))}function m(a){for(var a=a._tasks,b=a.length-1;0<=b;b--){var c=a[b];c.deferred.resolve(c.result)}}
function n(a,b){void 0!=b&&!(b instanceof u)&&e(K,a)}function q(a,c,f){if(b.isPlainObject(a))for(var g in a){var i=b.trim(g).replace(/ +/g," ").split(" "),j=[];""===i[0]?e(H):1===i.length?(j.push(i[0]),j.push("="),j.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(i[1])?3===i.length&&/^like$/i.test(i[1])?(j.push(i[0]),j.push(i[1]),j.push("?"),j.push("ESCAPE"),j.push('"'+i[2]+'"')):(j.push(i[0]),j.push(i[1]),j.push("?")):e(E);c.push(j.join(" "));f.push(a[g])}}function B(){}function u(a,b){this._db=a;this._tx=
b;this._tasks=[];this._transactions=[]}function F(a,c,e,f,g){c=i.u.str.format(L,e,c);b.isPlainObject(f)?(e=[],q(f,e,a),c+=" WHERE "+e.join(" AND ")):t(f)&&(c+=" WHERE "+f);b.isArray(g)&&(c+=" ORDER BY "+g.join(", "));return c}function A(a,c,e){this._txw=a;this._tableName=c;this._columns=b.isArray(e)?e.join(", "):"*";this._statement=this._orderBy=this._where=null;this._params=[];this._df=g();this._executed=!1}function D(a,b,c){this._txw=a;this._tableName=b;this._values=c?J(c):[];this._statement=[];
this._params=[];this._df=g();this._executed=!1}function C(a,b,c){this._txw=a;this._tableName=b;this._value=c;this._statement=this._where=null;this._params=[];this._df=g();this._executed=!1}function f(a,b){this._txw=a;this._tableName=b;this._statement=this._where=null;this._params=[];this._df=g();this._executed=!1}function o(a,b,c){this._txw=a;this._statement=b;this._params=c||[];this._df=g();this._executed=!1}function c(a){this._txw=a;this._queue=[];this._df=g();this._executed=!1;this._tasks=[]}function s(a){this._db=
a}function v(){}var L="SELECT {0} FROM {1}",K=3002,E=3003,Q=3010,H=3011,g=i.async.deferred;b.extend(u.prototype,{_runTransaction:function(){return null!=this._tx},_execute:function(a,b,c){this._runTransaction()?this._tx.executeSql(a,b,c):this._db.transaction(a,b,c)},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._tasks[this._tasks.length-1].result=a},_addTransaction:function(a){this._transactions.push(a)},_dispose:function(){for(var a=0,b=this._transactions.length;a<
b;a++)this._transactions[a]._dispose()}});A.prototype=new B;b.extend(A.prototype,{where:function(a){!b.isPlainObject(a)&&!t(a)&&e(3004,["Select","where"]);this._where=a;return this},orderBy:function(a){!b.isPlainObject(a)&&!t(a)&&e(3004,["Select","orderBy"]);this._orderBy=J(a);return this},execute:function(){var a=this,b=g(),c=this._executed,f=null;try{a._txw._addTask(b),c&&e(3E3),a._statement=F(a._params,a._tableName,a._columns,a._where,a._orderBy),a._txw._runTransaction()?a._txw._execute(this._statement,
this._params,function(c,e){f=e.rows;a._txw._setResult(f);b.notify(f,a._txw)}):a._txw._execute(function(c){a._txw._tx=c;c.executeSql(a._statement,a._params,function(c,e){f=e.rows;a._txw._setResult(f);b.notify(f,a._txw)})},function(b){a._txw._tx=null;j(a._txw,b);a._txw._dispose();a=null},function(){a._txw._tx=null;m(a._txw);a._txw._dispose();a=null})}catch(i){b.reject(i)}this._executed=!0;return b.promise()}});D.prototype=new B;b.extend(D.prototype,{execute:function(){function a(){c._statement.length===
t?(q=s,c._txw._setResult(q),n.notify(q,c._txw)):c._txw._execute(c._statement[t],c._params[t],function(b,c){t++;s.push(c.insertId);a()})}var c=this,f=function(){var a=c._values;if(0===a.length)c._statement.push(i.u.str.format("INSERT INTO {0} DEFAULT VALUES",c._tableName)),c._params.push([]);else for(var e=0,f=a.length;e<f;e++){var g=a[e];if(null==g)c._statement.push(i.u.str.format("INSERT INTO {0} DEFAULT VALUES",c._tableName)),c._params.push([]);else if(b.isPlainObject(g)){var l=[],j=[],m=[],n;for(n in g)l.push("?"),
j.push(n),m.push(g[n]);c._statement.push(i.u.str.format("INSERT INTO {0} ({1}) VALUES ({2})",c._tableName,j.join(", "),l.join(", ")));c._params.push(m)}}},n=g(),o=this._executed,q=null,s=[],t=0;try{c._txw._addTask(n),o&&e(3E3),f(),c._txw._runTransaction()?a():c._txw._execute(function(b){c._txw._tx=b;a()},function(a){c._txw._tx=null;j(c._txw,a);c._txw._dispose();c=null},function(){c._txw._tx=null;m(c._txw);c._txw._dispose();c=null})}catch(u){n.reject(u)}this._executed=!0;return n.promise()}});C.prototype=
new B;b.extend(C.prototype,{where:function(a){!b.isPlainObject(a)&&!t(a)&&e(3004,["Update","where"]);this._where=a;return this},execute:function(){var a=this,c=function(){var c=a._where,d=a._value,e=[],f;for(f in d)e.push(f+" = ?"),a._params.push(d[f]);a._statement=i.u.str.format("UPDATE {0} SET {1}",a._tableName,e.join(", "));b.isPlainObject(c)?(d=[],q(c,d,a._params),a._statement+=" WHERE "+d.join(" AND ")):t(c)&&(a._statement+=" WHERE "+c)},f=g(),n=this._executed,o=null;try{a._txw._addTask(f),n&&
e(3E3),c(),a._txw._runTransaction()?a._txw._execute(this._statement,this._params,function(b,c){o=c.rowsAffected;a._txw._setResult(o);f.notify(o,a._txw)}):a._txw._execute(function(b){a._txw._tx=b;b.executeSql(a._statement,a._params,function(b,c){o=c.rowsAffected;a._txw._setResult(o);f.notify(o,a._txw)})},function(b){a._txw._tx=null;j(a._txw,b);a._txw._dispose();a=null},function(){a._txw._tx=null;m(a._txw);a._txw._dispose();a=null})}catch(s){f.reject(s)}this._executed=!0;return f.promise()}});f.prototype=
new B;b.extend(f.prototype,{where:function(a){!b.isPlainObject(a)&&!t(a)&&e(3004,["Del","where"]);this._where=a;return this},execute:function(){var a=this,c=function(){var c=a._where;a._statement=i.u.str.format("DELETE FROM {0}",a._tableName);if(b.isPlainObject(c)){var d=[];q(c,d,a._params);a._statement+=" WHERE "+d.join(" AND ")}else t(c)&&(a._statement+=" WHERE "+c)},f=g(),n=this._executed,o=null;try{a._txw._addTask(f),n&&e(3E3),c(),a._txw._runTransaction()?a._txw._execute(this._statement,this._params,
function(b,c){o=c.rowsAffected;a._txw._setResult(o);f.notify(o,a._txw)}):a._txw._execute(function(b){a._txw._tx=b;b.executeSql(a._statement,a._params,function(b,c){o=c.rowsAffected;a._txw._setResult(o);f.notify(o,a._txw)})},function(b){a._txw._tx=null;j(a._txw,b);a._txw._dispose();a=null},function(){a._txw._tx=null;m(a._txw);a._txw._dispose();a=null})}catch(s){f.reject(s)}this._executed=!0;return f.promise()}});o.prototype=new B;b.extend(o.prototype,{execute:function(){var a=this,b=g(),c=this._executed,
f=this._statement,i=this._params,n=null;try{a._txw._addTask(b),c&&e(3E3),a._txw._runTransaction()?a._txw._execute(f,i,function(c,e){n=e;a._txw._setResult(n);b.notify(n,a._txw)}):a._txw._execute(function(c){a._txw._tx=c;c.executeSql(f,i,function(c,e){n=e;a._txw._setResult(n);b.notify(n,a._txw)})},function(b){a._txw._tx=null;j(a._txw,b);a._txw._dispose();a=null},function(){a._txw._tx=null;m(a._txw);a._txw._dispose();a=null})}catch(o){b.reject(o)}this._executed=!0;return b.promise()}});c.prototype=new B;
b.extend(c.prototype,{add:function(a){a instanceof B||e(3009);this._queue.push(a);return this},execute:function(){function a(a,b){function c(a){this._txw=new u(null,a)}for(var d=0,e=i.length;d<e;d++)c.prototype=i[d],a.push(new c(b))}function b(){if(c._tasks.length===o){for(var a=[],e=0,g=c._tasks.length;e<g;e++)a.push(c._tasks[e]._txw._tasks[0].result);c._txw._setResult(a);f.notify(a,c._txw)}else c._tasks[o].execute().progress(function(){o++;b()})}var c=this,f=this._df,i=this._queue,n=this._executed,
o=0;try{c._txw._addTask(f),n&&e(3E3),this._txw&&this._txw._addTransaction(this),c._txw._runTransaction()?(a(c._tasks,c._txw._tx),b()):c._txw._execute(function(e){a(c._tasks,e);c._txw._tx=e;b()},function(a){j(c._txw,a);c._txw._dispose()},function(){m(c._txw);c._txw._dispose()})}catch(q){f.reject(q)}this._df=g();this._executed=!0;return f.promise()},promise:function(){return this._df.promise()},_dispose:function(){for(var a=0,b=this._tasks.length;a<b;a++)this._tasks[a]._txw._tx=null,this._tasks[a]._txw=
null;this._txw=this._txw._tx=null}});b.extend(s.prototype,{select:function(a,c,f){t(a)||e(3001,"select");n("select",f);!b.isArray(c)&&"*"!==c&&e(3005,"select");return new A(f?f:new u(this._db,null),a,c)},insert:function(a,c,f){t(a)||e(3001,"insert");n("insert",f);null!=c&&!b.isArray(c)&&!b.isPlainObject(c)&&e(3006,"insert");return new D(f?f:new u(this._db,null),a,c)},update:function(a,c,f){t(a)||e(3001,"update");n("update",f);b.isPlainObject(c)||e(3006,"update");return new C(f?f:new u(this._db,null),
a,c)},del:function(a,b){t(a)||e(3001,"del");n("del",b);return new f(b?b:new u(this._db,null),a)},sql:function(a,c,f){n("sql",f);t(a)||e(3007,"sql");null!=c&&!b.isArray(c)&&e(3008,"sql");return new o(f?f:new u(this._db,null),a,c)},transaction:function(a){n("sql",a);return new c(a?a:new u(this._db,null))}});b.extend(v.prototype,{isSupported:!!window.openDatabase,open:function(a,b,c,e){if(this.isSupported)return a=openDatabase(a,b,c,e),new s(a)}});i.u.obj.expose("h5.api",{sqldb:new v})})();(function(){function e(b){this._storage=
b}b.extend(e.prototype,{getLength:function(){return this._storage.length},key:function(b){return this._storage.key(b)},getItem:function(b){b=this._storage.getItem(b);return null===b?null:i.u.obj.deserialize(b)},setItem:function(b,e){this._storage.setItem(b,i.u.obj.serialize(e))},removeItem:function(b){this._storage.removeItem(b)},clear:function(){this._storage.clear()},each:function(b){for(var e=this._storage,i=0,j=e.length;i<j;i++){var t=e.key(i);b(i,t,this.getItem(t))}}});i.u.obj.expose("h5.api.storage",
{isSupported:!!window.localStorage,local:new e(window.localStorage),session:new e(window.sessionStorage)})})()})(jQuery);